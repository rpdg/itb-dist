{"version":3,"sources":["/pages/system/integralMatch/PersonalScore.ts"],"names":[],"mappings":"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","file":"PersonalScore.js","sourcesContent":["import {api} from \"/ts/util/api\";\r\nimport opg from \"/ts/opg\";\r\nimport Table from \"/ts/ui/Table\";\r\nimport PopUp from \"/ts/ui/Popup\";\r\n\r\napi({\r\n    buyerScores: 'buyer/BuyerScores',\r\n    buyerScoreListByUserIdAndBarCode: 'buyer/BuyerScoreListByUserIdAndBarCode'\r\n});\r\n\r\n\r\nexport default class PersonalScore {\r\n    constructor(lng) {\r\n\r\n        opg.wrapPanel('#formScore', {\r\n            title: ``,\r\n            btnSearchText: `${lng.search}`,\r\n            btnSearchClick: function () {\r\n                tb.update({\r\n                    'barcode': barCode.jq.val(),\r\n                    'keyword': name.jq.val()\r\n                });\r\n            },\r\n        });\r\n        let barCode = opg('#barcode3'),\r\n            name = opg('#name3');\r\n        let tb: Table = opg('#tbScore').table({\r\n            api: api.buyerScores,\r\n            param: {\r\n                'barcode': barCode.jq.val(),\r\n                'keyword': name.jq.val()\r\n            },\r\n            columns: [\r\n                {\r\n                    text: `${lng.barcode}`,\r\n                    src: 'barcode',\r\n                    width: 150,\r\n                },\r\n                {\r\n                    text: `${lng.name}`,\r\n                    src: 'name',\r\n                    width: 150,\r\n                },\r\n                {\r\n                    text: `${lng.company}`,\r\n                    src: 'company',\r\n                },\r\n                {\r\n                    text: `${lng.score}`,\r\n                    src: 'score',\r\n                    width: 150,\r\n                },\r\n                {\r\n                    text: lng.process,\r\n                    src: 'id',\r\n                    width: 120,\r\n                    render: (id, index, row) => {\r\n                        return `<button data-id=\"${row.userId}\" data-barcode=\"${row.barcode}\" data-index=\"${row[':index']}\" class=\"btn-mini btn-info btnDetail\">${lng.viewDetail}</button>  `;\r\n                    },\r\n                },\r\n            ]\r\n        });\r\n\r\n\r\n        tb.tbody.on('click', '.btnDetail', function (e) {\r\n            let $tb = $('<table></table>');\r\n\t        let $divTb = $('<div style=\"height: 353px; overflow-x: hidden; overflow-y: auto;\"></div>').append($tb);\r\n\r\n            opg.popTop($divTb, {\r\n                title: lng.viewDetail,\r\n                width: 700,\r\n                height: 400\r\n            });\r\n\r\n            let tb: Table = opg($tb).table({\r\n                api: api.buyerScoreListByUserIdAndBarCode,\r\n                param: {\r\n                    userId: e.target.getAttribute('data-id'),\r\n                    barcode: e.target.getAttribute('data-barcode')\r\n                },\r\n                columns: [\r\n                    {\r\n                        text: `${lng.name}`,\r\n                        src: 'title',\r\n                        width: 120,\r\n                    },\r\n                    {\r\n                        text: `${lng.score}`,\r\n                        src: 'score',\r\n                        width: 120,\r\n                    },\r\n                    {\r\n                        text: `${lng.event}`,\r\n                        src: 'type',\r\n                        width: 460,\r\n                        render: (id, index, row) => {\r\n                            if (row.type == 0) {\r\n                                return `${lng.scoreType}`;\r\n                            } else if (row.type == 1) {\r\n                                return `${lng.scoreType1}`;\r\n                            }\r\n                        }\r\n                    },\r\n                ]\r\n            });\r\n        });\r\n\r\n\r\n    }\r\n}"]}