{"version":3,"sources":["/pages/system/timeSlot/TimeModifier.ts"],"names":[],"mappings":";;;;AAAA,8BAAyB;AAIzB,+CAA4C;AAC5C,IAAM,GAAG,GAAG,qBAAS,CAAC,OAAO,CAAC;AAG9B,aAAG,CAAC,GAAG,CAAC;IACP,kBAAkB,EAAE,sBAAsB;IAC1C,qBAAqB,EAAE,qBAAqB;CAC5C,CAAC,CAAC;AAEH;IAEC,sBAAY,QAAe,EAAG,IAAW;QACxC,IAAI,MAAM,GAAG,CAAC,CAAC,6KAEyC,GAAG,CAAC,SAAS,4QAKb,GAAG,CAAC,OAAO,wMAM5C,GAAG,CAAC,QAAQ,8KAIT,GAAG,CAAC,GAAG,uDACP,GAAG,CAAC,MAAM,8FAGb,GAAG,CAAC,IAAI,0JAKb,CAAC,CAAC;QAEpB,IAAG,IAAI,IAAI,IAAI,CAAC,EAAE,EAAC;YAClB,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;SAC1B;QAGD,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,cAAc,CAAC;YAC/C,UAAU,EAAE,KAAK;YACjB,MAAM,EAAE,QAAQ;YAChB,IAAI,EAAG,EAAE;SACT,CAAC,CAAC;QAEH,IAAI,MAAM,GAAW,aAAG,CAAC,OAAO,CAAC,MAAM,EAAE;YACxC,IAAI,KAAK,GAAG,MAAM,CAAC,YAAY,CAAC;gBAC/B,SAAS,EAAE;oBACV,IAAI,EAAE,GAAG,CAAC,SAAS;oBACnB,OAAO,EAAE,IAAI;oBACb,IAAI,EAAE,MAAM;iBACZ;gBACD,OAAO,EAAE;oBACR,IAAI,EAAE,GAAG,CAAC,OAAO;oBACjB,OAAO,EAAE,IAAI;oBACb,IAAI,EAAE,MAAM;iBACZ;aACD,CAAC,CAAC;YAEH,IAAI,KAAK,EAAE;gBACV,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAEnB,IAAI,MAAM,GAAI,KAAK,CAAC,EAAE,EAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,aAAa,CAAC;gBAEzD,aAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE;oBACtB,QAAQ,CAAC,MAAM,EAAE,CAAC;oBAClB,MAAM,CAAC,KAAK,EAAE,CAAC;gBAChB,CAAC,CAAC,CAAC;aACH;YAED,OAAO,IAAI,CAAC;QACb,CAAC,EAAE;YACF,KAAK,EAAE,GAAG,CAAC,gBAAgB;YAC3B,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;SACX,CAAC,CAAC;IACJ,CAAC;IAEF,mBAAC;AAAD,CAAC;AAED,kBAAe,YAAY,CAAC","file":"TimeModifier.js","sourcesContent":["import opg from 'ts/opg';\r\n\r\nimport Table from 'ts/ui/Table';\r\nimport Popup from 'ts/ui/Popup';\r\nimport {Languages} from 'ts/util/Languages';\r\nconst lpg = Languages.package;\r\n\r\n\r\nopg.api({\r\n\t'addTimeSlot!POST': 'timeslot/AddTimeSlot',\r\n\t'updateTimeSlot!POST': 'timeslot/UpTimeSlot',\r\n});\r\n\r\nclass TimeModifier {\r\n\r\n\tconstructor(srcTable: Table , json ?: any) {\r\n\t\tlet formJq = $(`<form style=\"padding: 20px;\"><table class=\"search-table\" style=\"width: 100%;\">\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td class=\"lead\" style=\"width: 280px !important;\">${lpg.beginTime}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input id=\"beginTime\" name=\"begintime\" type=\"datetime\" readonly />\r\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"id\" value=\"\">\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"lead\" style=\"width: 280px !important;\">${lpg.endTime}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input id=\"endTime\" name=\"endtime\" type=\"datetime\" readonly />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td class=\"lead\">${lpg.slotType}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<select name=\"slottype\" id=\"slotType\">\r\n\t\t\t\t\t\t\t\t<option value=\"0\"></option>\r\n\t\t\t\t\t\t\t\t<option value=\"1\">${lpg.org}</option>\r\n\t\t\t\t\t\t\t\t<option value=\"2\">${lpg.custom}</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"lead\">${lpg.info}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input id=\"info\" name=\"info\" type=\"text\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table></form>`);\r\n\r\n\t\tif(json && json.id){\r\n\t\t\tformJq.jsonToFields(json);\r\n\t\t}\r\n\r\n\r\n\t\tformJq.find('[type=\"datetime\"]').datetimepicker({\r\n\t\t\tdatepicker: false,\r\n\t\t\tformat: 'H:i:00',\r\n\t\t\tstep : 30,\r\n\t\t});\r\n\r\n\t\tlet popWin :Popup  = opg.confirm(formJq, () => {\r\n\t\t\tlet param = formJq.fieldsToJson({\r\n\t\t\t\tbegintime: {\r\n\t\t\t\t\tname: lpg.beginTime,\r\n\t\t\t\t\trequire: true,\r\n\t\t\t\t\ttype: 'time',\r\n\t\t\t\t},\r\n\t\t\t\tendtime: {\r\n\t\t\t\t\tname: lpg.endTime,\r\n\t\t\t\t\trequire: true,\r\n\t\t\t\t\ttype: 'time',\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tif (param) {\r\n\t\t\t\tconsole.log(param);\r\n\r\n\t\t\t\tlet action  = param.id? 'updateTimeSlot' : 'addTimeSlot';\r\n\r\n\t\t\t\topg.api[action](param, () => {\r\n\t\t\t\t\tsrcTable.update();\r\n\t\t\t\t\tpopWin.close();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}, {\r\n\t\t\ttitle: lpg.timeSlotsSetting ,\r\n\t\t\twidth: 780,\r\n\t\t\theight: 200,\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default TimeModifier;"]}