{"version":3,"sources":["/pages/system/timeSlot/modifyValidTime.ts"],"names":[],"mappings":";;;;AAAA,oCAA4B;AAG5B,kDAAqD;AAGrD,gBAAG,CAAC,GAAG,CAAC;IACP,kBAAkB,EAAE,sBAAsB;CAC1C,CAAC,CAAC;AAEH,IAAM,GAAG,GAAG,qBAAS,CAAC,OAAO,CAAC;AAE9B;IAKC,2BAAoB,QAAe;QAAnC,iBA6DC;QA5DA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,0IAEO,GAAG,CAAC,SAAS,4QAKb,GAAG,CAAC,OAAO,2OAMX,GAAG,CAAC,QAAQ,4JAIZ,GAAG,CAAC,IAAI,0JAKb,CAAC,CAAC;QAEpB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,cAAc,CAAC;YACpD,UAAU,EAAE,KAAK;YACjB,MAAM,EAAE,KAAK;SACb,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,GAAG,gBAAG,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE;YACtC,IAAI,KAAK,GAAG,KAAI,CAAC,MAAM,CAAC,YAAY,CAAC;gBACpC,SAAS,EAAE;oBACV,IAAI,EAAE,GAAG,CAAC,SAAS;oBACnB,OAAO,EAAE,IAAI;oBACb,IAAI,EAAE,MAAM;iBACZ;gBACD,OAAO,EAAE;oBACR,IAAI,EAAE,GAAG,CAAC,OAAO;oBACjB,OAAO,EAAE,IAAI;oBACb,IAAI,EAAE,MAAM;iBACZ;aACD,CAAC,CAAC;YAEH,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACX,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAEnB,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC;gBACtB,2BAA2B;gBAC3B,gBAAG,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,EAAE;oBAC1B,QAAQ,CAAC,MAAM,EAAE,CAAC;oBAClB,KAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;gBACrB,CAAC,CAAC,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,IAAI,CAAC;QACb,CAAC,EAAE;YACF,KAAK,EAAE,QAAQ;YACf,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;SACX,CAAC,CAAC;IACJ,CAAC;IAEM,6BAAW,GAAlB,UAAmB,IAAS,EAAG,QAAe;QAC7C,EAAE,CAAC,CAAC,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC;YACjC,iBAAiB,CAAC,QAAQ,GAAG,IAAI,iBAAiB,CAAC,QAAQ,CAAC,CAAC;QAC9D,CAAC;QAED,iBAAiB,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAErD,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC;IACnC,CAAC;IACF,wBAAC;AAAD,CAAC","file":"modifyValidTime.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport Table from 'ts/ui/Table';\r\nimport Popup from 'ts/ui/Popup';\r\nimport {Languages} from '../../../ts/util/Languages';\r\n\r\n\r\nopg.api({\r\n\t'addTimeSlot!POST': 'timeslot/AddTimeSlot',\r\n});\r\n\r\nconst lpg = Languages.package;\r\n\r\nclass ValidTimeModifier {\r\n\tprivate static instance: ValidTimeModifier;\r\n\tprivate formJq: JQuery;\r\n\tprivate popWin: Popup;\r\n\r\n\tprivate constructor(srcTable: Table) {\r\n\t\tthis.formJq = $(`<form style=\"padding: 20px;\"><table class=\"search-table\" style=\"width: 100%;\">\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td class=\"lead\">${lpg.beginTime}</td>\r\n\t\t\t\t\t\t<td style=\"width: 200px !important;\">\r\n\t\t\t\t\t\t\t<input id=\"beginTime\" name=\"beginTime\" type=\"datetime\" readonly />\r\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"id\" value=\"\">\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"lead\">${lpg.endTime}</td>\r\n\t\t\t\t\t\t<td style=\"width: 200px !important;\">\r\n\t\t\t\t\t\t\t<input id=\"endTime\" name=\"endTime\" type=\"datetime\" readonly />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td class=\"lead\">${lpg.slotType}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input id=\"slotType\" name=\"slotType\" type=\"text\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"lead\">${lpg.info}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<input id=\"info\" name=\"info\" type=\"text\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table></form>`);\r\n\r\n\t\tthis.formJq.find('[type=\"datetime\"]').datetimepicker({\r\n\t\t\tdatepicker: false,\r\n\t\t\tformat: 'H:i',\r\n\t\t});\r\n\r\n\t\tthis.popWin = opg.confirm(this.formJq, () => {\r\n\t\t\tlet param = this.formJq.fieldsToJson({\r\n\t\t\t\tbeginTime: {\r\n\t\t\t\t\tname: lpg.beginTime,\r\n\t\t\t\t\trequire: true,\r\n\t\t\t\t\ttype: 'time',\r\n\t\t\t\t},\r\n\t\t\t\tendTime: {\r\n\t\t\t\t\tname: lpg.endTime,\r\n\t\t\t\t\trequire: true,\r\n\t\t\t\t\ttype: 'time',\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tif (param) {\r\n\t\t\t\tconsole.log(param);\r\n\r\n\t\t\t\tparam.id = ~~param.id;\r\n\t\t\t\t//param.validTime += ':00';\r\n\t\t\t\topg.api.addTimeSlot(param, () => {\r\n\t\t\t\t\tsrcTable.update();\r\n\t\t\t\t\tthis.popWin.close();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}, {\r\n\t\t\ttitle: '修改生效时间',\r\n\t\t\twidth: 480,\r\n\t\t\theight: 200,\r\n\t\t});\r\n\t}\r\n\r\n\tstatic getInstance(json: any , srcTable: Table): ValidTimeModifier {\r\n\t\tif (!ValidTimeModifier.instance) {\r\n\t\t\tValidTimeModifier.instance = new ValidTimeModifier(srcTable);\r\n\t\t}\r\n\r\n\t\tValidTimeModifier.instance.formJq.jsonToFields(json);\r\n\r\n\t\treturn ValidTimeModifier.instance;\r\n\t}\r\n}"]}