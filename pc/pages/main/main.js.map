{"version":3,"sources":["/pages/main/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport {Cache, store} from 'ts/util/store';\r\nimport {Languages} from 'ts/util/Languages';\r\nimport cfg from 'ts/app.cfg.ts';\r\nimport PopUp from 'ts/ui/Popup';\r\n\r\nopg.api({\r\n\tGetCurrentUserInfoAndMenus: 'user/GetCurrentUserInfoAndMenus?type=1',\r\n});\r\n\r\nconst menuPack = Languages.package['menu'];\r\n\r\nconst menuDefine = {\r\n\tNewsManagement: '../content/news/index.html',\r\n\tNoticeManagement: '../content/notice/index.html',\r\n\tSponsorManagement: '../content/sponsor/index.html',\r\n\tCarouselManagement: '../content/carousel/index.html',\r\n\tRoleOperation: '../roles/role/index.html',\r\n\tRoleUserOperation: '../roles/roleUser/index.html',\r\n\tRoleAuthorityManagment: '../roles/roleRights/index.html',\r\n\tMessageManagement: '../content/message/index.html',\r\n\tActivityManagement: '../content/activity/index.html',\r\n\tPhotoManagment: '../content/photo/index.html',\r\n\tMediaManagment: '../content/media/index.html',\r\n\tExhibitionInfoManagment: '../content/exhibition/index.html',\r\n\tRoleAuthorityManagment: '../roles/roleRights/index.html',\r\n\tDisableWordsSetting: '../system/forbiddenWords/index.html',\r\n\tDisableWordsSetting: '../system/forbiddenWords/index.html',\r\n\tStageSetting: '../system/period/index.html',\r\n\tTimeSetting: '../system/timeSlot/index.html',\r\n\tPairingIntegralSetting: '../system/integralMatch/index.html',\r\n\tExhibitionInfoManagment: '../content/exhibition/index.html',\r\n};\r\n\r\nopg.api.GetCurrentUserInfoAndMenus(function (data) {\r\n\tlet permissions = data.menus;\r\n\r\n\tconsole.dir(data);\r\n\r\n\r\n\tlet menu = {}, curMainMenuId;\r\n\r\n\tfor (let i = 0, l = permissions.length; i < l; i++) {\r\n\t\tlet mn = permissions[i];\r\n\t\tmenu['#' + mn.id] = mn;\r\n\t}\r\n\r\n\tlet mainMenu = $('#mainMenu'),\r\n\t\tsubMenu = $('#subMenu'),\r\n\t\tdivTd = $('#td'),\r\n\t\tmainFrame: JQuery = $('#mainFrame'),\r\n\t\tmainFrameWindow: Window = (mainFrame[0] as HTMLIFrameElement).contentWindow as Window;\r\n\r\n\t/*if (permissions.length > 6) {\r\n\t mainMenu.addClass('small-menu');\r\n\t }*/\r\n\r\n\t$('#divPn1').click(function () {\r\n\t\tlet that = $(this);\r\n\t\tif (that.hasClass('ellipse')) {\r\n\t\t\tthat.removeClass('ellipse');\r\n\t\t\tsubMenu.css('width', 180);\r\n\t\t\tdivTd.css('left', 180);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthat.addClass('ellipse');\r\n\t\t\tsubMenu.css('width', 0);\r\n\t\t\tdivTd.css('left', 0);\r\n\t\t}\r\n\t});\r\n\r\n\tlet mainMenuSelector = 'a:eq(0)', subMenuSelector = 'a:eq(0)';\r\n\tif (location.hash.length > 1) {\r\n\t\tlet ph = location.hash.split('/');\r\n\t\tmainMenuSelector = '#\\\\' + ph[0];\r\n\t\tif (ph[1]) {\r\n\t\t\tsubMenuSelector = '#\\\\/' + ph[1];\r\n\t\t}\r\n\t}\r\n\r\n\tsubMenu.on('click', 'a', function () {\r\n\t\tlet sm = $(this);\r\n\t\tsm.addClass('cur').siblings('.cur').removeClass('cur');\r\n\t\t//mainFrame.attr('src', sm.attr('href') as string);\r\n\t\tCache.empty();\r\n\t\tlet p = sm.data('permission');\r\n\t\tconsole.log(sm, p);\r\n\t\tif (p) {\r\n\t\t\tlet pm = {}, pa = p.split(',');\r\n\t\t\tpa.forEach(v => pm[v] = true);\r\n\t\t\tstore.set('permission', pm);\r\n\t\t\tconsole.warn(sm.text() + ' has permission control!', p, pm);\r\n\t\t}\r\n\r\n\t\tmainFrameWindow.location.replace(sm.attr('href'));\r\n\t\tlocation.hash = curMainMenuId + sm[0].id;\r\n\r\n\r\n\t\treturn false;\r\n\t});\r\n\r\n\tmainMenu.on('click', 'a', function () {\r\n\t\tlet cur = $(this), mnId = cur.attr('href');\r\n\t\tcurMainMenuId = mnId;\r\n\t\tcur.addClass('cur').siblings('.cur').removeClass('cur');\r\n\r\n\t\tsubMenu.bindList({\r\n\t\t\ttemplate: '<a id=\"/${id}\" href=\"${name:=url}\" target=\"mainFrame\" data-permission=\"${id:=g}\">${name:=t}</a>',\r\n\t\t\tlist: menu[mnId].childMenus,\r\n\t\t\titemRender: {\r\n\t\t\t\tg: (v, i, row) => {\r\n\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\tif (row.childMenus && row.childMenus.length) {\r\n\t\t\t\t\t\trow.childMenus.map(function (v: any, i: number) {\r\n\t\t\t\t\t\t\tarr.push(v['name']);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn arr.join(',');\r\n\t\t\t\t},\r\n\t\t\t\tt: v => menuPack[v] || v,\r\n\t\t\t\turl: n => menuDefine[n] || 'about:blank',\r\n\t\t\t},\r\n\t\t}).find(subMenuSelector).click();\r\n\r\n\t\tif (subMenuSelector != 'a:eq(0)')\r\n\t\t\tsubMenuSelector = 'a:eq(0)';\r\n\r\n\t});\r\n\r\n\r\n\tmainMenu.bindList({\r\n\t\ttemplate: '<a id=\"#${id}\" href=\"#${id}\">${name:=t}</a>',\r\n\t\tlist: permissions,\r\n\t\titemRender: {\r\n\t\t\tt: v => menuPack[v] || v,\r\n\t\t},\r\n\t}).find(mainMenuSelector).click();\r\n\r\n\r\n\tlet wViewport = window.document.documentElement.clientWidth, wMenu = mainMenu.outerWidth();\r\n\tconsole.log(wViewport - wMenu);\r\n\r\n\tif (wViewport - wMenu < 0) {\r\n\t\tmainMenu.addClass('nano-menu');\r\n\t}\r\n\tif (wViewport - wMenu < 150) {\r\n\t\tmainMenu.addClass('mini-menu');\r\n\t}\r\n\telse if (wViewport - wMenu < 300) {\r\n\t\tmainMenu.addClass('small-menu');\r\n\t}\r\n\r\n});\r\n\r\n\r\n$('#liAbout').click(function () {\r\n\tconsole.log(Languages);\r\n\tlet html = $(`<div style=\" font-size: 12px; color: #555; padding: 12px 50px;\">\r\n\t\t\t\t\t<label><input type=\"radio\" name=\"lng\" value=\"${Languages.names.cn}\" ${Languages.current === Languages.names.cn ? 'checked' : ''}> 中文</label>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<label><input type=\"radio\" name=\"lng\" value=\"${Languages.names.en}\" ${Languages.current === Languages.names.en ? 'checked' : ''}> English</label>\r\n\t\t\t\t</div>`);\r\n\r\n\topg.confirm(html, function () {\r\n\t\tlet selected = html.find(':radio:checked').val();\r\n\t\tconsole.log(selected);\r\n\t\tif (selected != Languages.current) {\r\n\t\t\tstore.set(Languages.configKeyName, selected);\r\n\t\t\tlocation.reload(true);\r\n\t\t}\r\n\t}, {\r\n\t\ttitle: Languages.package['language'],\r\n\t\twidth: 400,\r\n\t});\r\n\r\n});\r\n\r\n\r\n$('#liLogOff').click(() => {\r\n\tstore.remove('Authorization');\r\n\twindow.location.href = cfg.loginPage;\r\n});\r\n\r\n\r\nhistory.pushState(null, null, document.URL);\r\nwindow.addEventListener('popstate', function () {\r\n\t//debugger;\r\n\thistory.pushState(null, null, document.URL);\r\n\tPopUp.closeLast();\r\n});\r\n\r\n\r\n$('#liFullScreen').click(evt => {\r\n\t// Test for each of the supported versions of full screen APIs and call\r\n\t// either requestFullscreen or cancelFullScreen (or exitFullScreen)\r\n\t//  Structure:\r\n\t//  Does the incoming target support requestFullscreen (or prefaced version)\r\n\t//  if (there is a fullscreen element)\r\n\t//      then cancel or exit\r\n\t//  else request full screen mode\r\n\r\n\tlet divObj = evt.target as Node;  //  get the target element\r\n\r\n\tif (divObj.requestFullscreen)\r\n\t\tif (document.fullScreenElement) {\r\n\t\t\tdocument.cancelFullScreen();\r\n\t\t} else {\r\n\t\t\tdocument.documentElement.requestFullscreen();\r\n\t\t}\r\n\telse if (divObj.webkitRequestFullscreen)\r\n\t\tif (document.webkitFullscreenElement) {\r\n\t\t\tdocument.webkitCancelFullScreen();\r\n\t\t} else {\r\n\t\t\tdocument.documentElement.webkitRequestFullscreen();\r\n\t\t}\r\n\telse if (divObj.msRequestFullscreen)\r\n\t\tif (document.msFullscreenElement) {\r\n\t\t\tdocument.msExitFullscreen();\r\n\t\t} else {\r\n\t\t\tdocument.body.msRequestFullscreen();\r\n\t\t}\r\n\telse if (divObj.mozRequestFullScreen)\r\n\t\tif (document.mozFullScreenElement) {\r\n\t\t\tdocument.mozCancelFullScreen();\r\n\t\t} else {\r\n\t\t\tdocument.documentElement.mozRequestFullScreen();\r\n\t\t}\r\n\t//  stop bubbling so we don't get bounce back\r\n\tevt.stopPropagation();\r\n\r\n});"]}