{"version":3,"sources":["/pages/logistics/applicationForBoothActivity/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport Panel from 'ts/ui/Panel.ts';\r\nimport Table from 'ts/ui/Table.ts';\r\nimport {Combo} from 'ts/ui/Combo';\r\nimport {Languages} from 'ts/util/Languages';\r\nimport {store} from '../../../ts/util/store';\r\nimport PopUp from \"../../../ts/ui/Popup\";\r\nimport {url} from \"../../../ts/util/utils\";\r\nimport {request, string, dateTime, is, url, convert, format, array} from  'ts/util/utils';\r\n\r\nconsole.log('Languages:', Languages);\r\n\r\nopg.api({\r\n\t'getboothactivitylistbyuser!post': 'Operation/Getboothactivitylistbyuser',\r\n    'addboothactivity!post':'Operation/Addboothactivity'\r\n});\r\n\r\nconst lpg = Languages.package;\r\n\r\nlet clng='en';\r\n\r\nif(localStorage.getItem(\"lngPkg\")!=null|| localStorage.getItem(\"lngPkg\")!=undefined)\r\n{\r\n    const currentlng=localStorage.getItem(\"lngPkg\");\r\n    clng=currentlng.replace(/[\"\"\"]/g,\"\");\r\n}\r\n\r\njQuery.datetimepicker.setLocale(Languages.current);\r\n$('#starttime,#stoptime').each(function (i, elem) {\r\n    $(elem).datetimepicker({\r\n        timepicker: true,\r\n        //closeOnDateSelect: true,\r\n        format: 'Y-m-d H:m:s'\r\n    });\r\n});\r\n\r\nfunction refreshtable() {\r\n    let xparam = {}\r\n    xparam.pageIndex = 0;\r\n    xparam.currentlng=clng;\r\n    tb.update(xparam);\r\n}\r\n\r\n\r\n//const permission = store.get('permission');\r\nlet tbButtons = [];\r\n\r\n\r\n\r\nlet tb: Table = opg('#tb').table({\r\n\tapi: opg.api.getboothactivitylistbyuser,\r\n\tlazy: true,\r\n\ttitleBar: {\r\n\t\ttitle: `${lpg.list}`,\r\n\t\tbuttons: tbButtons,\r\n\t},\r\n\tcolumns: [\r\n\t\t{\r\n\t\t\ttext: `${lpg.booth}`, width: 50,\r\n\t\t\tsrc: 'standno',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `${lpg.exhibitor}`, width: 50,\r\n\t\t\tsrc: 'exhibitor',\r\n\t\t},\r\n        {\r\n            text: `${lpg.company}`, width: 50,\r\n            src: 'company',\r\n        },\r\n        {\r\n            text: `${lpg.eventtype}`, width: 100,\r\n            src: 'eventtype',\r\n            render:function (id, index, row) {\r\n                let html = ``;\r\n                if (row.eventtype==='0') {\r\n                    html += `<label>${lpg.eventtypeoption[0]}</label>`;\r\n                }\r\n                else if(row.eventtype==='1') {\r\n                    html += `<label>${lpg.eventtypeoption[1]}</label>`;\r\n                }\r\n                return html;\r\n            },\r\n        },\r\n        {\r\n            text: `${lpg.starttime}`, width: 100,\r\n            src: 'starttime'\r\n        },\r\n\t\t{\r\n\t\t\ttext: `${lpg.stoptime}`, width: 50,\r\n\t\t\tsrc: 'stoptime',\r\n\t\t},\r\n        {\r\n            text: `${lpg.eventname}`, width: 100,\r\n            src: 'eventname',\r\n        },\r\n        {\r\n            text: `${lpg.plannednum}`, width: 100,\r\n            src: 'plannednum',\r\n        },\r\n        {\r\n            text: `${lpg.place}`, width: 100,\r\n            src: 'place'\r\n        },\r\n        {\r\n            text: `${lpg.chargepeople}`, width: 100,\r\n            src: 'chargepeople',\r\n        },\r\n        {\r\n            text: `${lpg.chargetel}`, width: 100,\r\n            src: 'chargetel'\r\n        },\r\n        {\r\n            text: `${lpg.chargemail}`, width: 100,\r\n            src: 'chargemail'\r\n        },\r\n        // {\r\n        //     text: `${lpg.service}`, width: 100,\r\n        //     src: 'service',\r\n        //     render:function (id, index, row) {\r\n        //         let html = ``;\r\n        //         var t=row.service.split(',');\r\n        //         for(var i=0;i<t.length;i++) {\r\n        //             html += `${lpg.serviceoperation[t[i]]}<br/>`;\r\n        //         }\r\n        //\r\n        //         return html;\r\n        //     },\r\n        // },\r\n        // {\r\n        //     text: `${lpg.serviceother}`, width: 100,\r\n        //     src: 'serviceother'\r\n        // },\r\n        {\r\n            text: `${lpg.createtime}`, width: 100,\r\n            src: 'createtime',\r\n        },\r\n        {\r\n            text: `${lpg.status}`, width: 50,\r\n            src: 'status',\r\n            render:function (id, index, row) {\r\n                let html = ``;\r\n                if (row.status==='0') {\r\n                    html += `<label class=\"apply\">${lpg.statustype[0]}</label>`;\r\n                }\r\n                else if(row.status==='1') {\r\n                    html += `<label class=\"agree\">${lpg.statustype[1]}</label>`;\r\n                }\r\n                else if(row.status==='2') {\r\n                    html += `<label class=\"deny\">${lpg.statustype[2]}</label>`;\r\n                }\r\n                return html;\r\n            }\r\n        }\r\n\t],\r\n\tpagination: true,\r\n});\r\n\r\n\r\n\r\n// tb.tbody.on('click', '.btn-info', function () {\r\n//     let btn = $(this), letterid = btn.data('id');\r\n//     let param={};\r\n//     param.letterid=letterid;\r\n//     opg.api.createPDF(param, function (data) {\r\n//         window.open(\"../../../../../Upload/letter/\"+data.filename,\"_blank\");\r\n//         tb.update();\r\n//     });\r\n// });\r\n\r\n$(\"#btnReset\").click(function() {\r\n    location.reload(true);\r\n});\r\n\r\n$(\"#btnSaveMain\").click(function() {\r\n    let param=$(\"#tbMain\").fieldsToJson();\r\n    let s=GetCheckBoxCheckedValue(\"servicecheckbox\");\r\n    param.servicecheckbox=s.join(',');\r\n    param.serviceother=\"\";\r\n\r\n    opg.api.addboothactivity(param, function (data) {\r\n        location.reload(true);\r\n    });\r\n});\r\n\r\n\r\nrefreshtable();\r\n\r\n\r\n// $(\"#btnServiceApply\").click(function(){\r\n//\r\n//     let pop = opg.popTop(`<iframe src=\"${addPage}\"></iframe>` , {\r\n// \t\ttitle: `${lpg.serviceApplylist}`,\r\n// \t\tbtnMax: false,\r\n// \t\twidth: 900,\r\n// \t\theight: 400,\r\n//         buttons: {\r\n//             send: {\r\n//                 className: 'btn-success',\r\n//                 text: lpg.sendApply,\r\n//                 onClick: function (i, ifr) {\r\n//\r\n//                     let resource = ifr.getLetterFill();\r\n//                     if (resource) {\r\n//                         if(resource.starttime<'2018-05-13' || resource.starttime>'2018-05-19' || resource.stoptime<'2018-05-13' || resource.stoptime>'2018-05-19' || resource.starttime>resource.stoptime) {\r\n//                             ifr.parent.opg.confirm(lpg.errortimeinfo,function() {\r\n//\r\n//                             });\r\n//                         }\r\n//                         else\r\n//                             sendLetter(resource, pop);\r\n//                     }\r\n//\r\n//                     return true;\r\n//                 }\r\n//             },\r\n//             cancel: lpg.cancel\r\n//         },\r\n// \t\tonClose: function () {\r\n//\r\n// \t\t}\r\n// \t});\r\n// });\r\n//\r\n// function sendLetter(resource, pop: PopUp) {\r\n// \topg.api.addLetter(resource, function (data) {\r\n// \t\tpop.close();\r\n//\r\n// \t\trefreshtable();\r\n// \t});\r\n// }\r\n\r\nfunction formatdate(mydate) {\r\n    var newdate;\r\n    var data = new Date(mydate);\r\n    var year = data.getFullYear();  //获取年\r\n    var month = data.getMonth() + 1;    //获取月\r\n    var day = data.getDate(); //获取日\r\n    if(month<10) {\r\n        if(day<10)\r\n            newdate= year+\"-0\"+month+\"-0\"+day;\r\n        else\r\n            newdate= year+\"-0\"+month+\"-\"+day;\r\n    }\r\n    else {\r\n        if(day<10)\r\n            newdate = year + \"-\" + month+\"-0\"+day;\r\n        else\r\n            newdate = year + \"-\" + month + \"-\" + day;\r\n    }\r\n    return newdate;\r\n}\r\n\r\nfunction GetCheckBoxCheckedValue(name) {\r\n    var arr = new Array;\r\n    $(\"input[type=checkbox][name=\" + name + \"]:checked\").each(function () {\r\n        arr.push($(this).val());\r\n    });\r\n    return arr;\r\n}"]}