{"version":3,"sources":["/pages/logistics/myBooth/booth.ts"],"names":[],"mappings":"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","file":"booth.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport Panel from 'ts/ui/Panel.ts';\r\nimport Table from 'ts/ui/Table.ts';\r\nimport {Combo} from 'ts/ui/Combo';\r\nimport {Languages} from 'ts/util/Languages';\r\nimport PopUp from \"ts/ui/Popup\";\r\nimport {url} from \"ts/util/utils\";\r\nimport {api} from \"ts/util/api\";\r\nimport {request, string, dateTime, is, url, convert, format, array} from  'ts/util/utils';\r\n\r\n\r\nopg.api({\r\n\t'getboothdesignlistbyuser!post': 'Operation/Getboothdesignlistbyuser',\r\n    'addboothdesign!post':'Operation/Addboothdesign',\r\n    'upload!UPLOAD': 'upload/files'\r\n});\r\n\r\nconst lpg = Languages.package;\r\n\r\nlet clng='en';\r\n\r\nif(localStorage.getItem(\"lngPkg\")!=null|| localStorage.getItem(\"lngPkg\")!=undefined)\r\n{\r\n    const currentlng=localStorage.getItem(\"lngPkg\");\r\n    clng=currentlng.replace(/[\"\"\"]/g,\"\");\r\n}\r\n\r\n\r\n\r\n$(\"#btnReset\").click(function() {\r\n    location.reload(true);\r\n});\r\n\r\n$(\"#btnSaveMain\").click(function() {\r\n    let param=$(\"#tbMain\").fieldsToJson();\r\n    let designpic=\"\";\r\n\r\n    for(var i=0;i<param.icon.length;i++) {\r\n        if(param.icon[i]!=\"\") {\r\n            designpic+=param.icon[i]+\"|\";\r\n        }\r\n    }\r\n    param.designpic=designpic;\r\n    opg.api.addboothdesign(param, function (data) {\r\n        location.reload(true);\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\nCombo.makeClearableInput($('#logoPicture'), $({}));\r\nlet tdLogo = $('#td_logoPicture');\r\n$('.ipt-eraser' , '#tdUploadLogo').on('click' , function () {\r\n    tdLogo.empty();\r\n});\r\n\r\n\r\nlet uploadForm = $(`<form>\r\n\t\t\t\t\t\t<input name=\"file\" type=\"file\" accept=\"image/jpg,image/jpeg,image/png,image/tif,image/gif\">\r\n\t\t\t\t</form>`);\r\n\r\n$('#btnUploadDialog1,#btnUploadDialog2,#btnUploadDialog3,#btnUploadDialog4,#btnUploadDialog5,#btnUploadDialog6,#btnUploadDialog7,#btnUploadDialog8').click(function () {\r\n    let target = $(this).data('target');\r\n    (uploadForm[0] as HTMLFormElement).reset();\r\n    let pop: PopUp = top.opg.confirm(uploadForm, function () {\r\n        let formData = new FormData(uploadForm[0] as HTMLFormElement);\r\n        opg.api.upload(formData, function (data) {\r\n            let iptCoverPicture = $(`#${target}`);\r\n            iptCoverPicture.val(data[0].downloadLink);\r\n\r\n            let tdCover = $(`#td_${target}`);\r\n            tdCover.html(`<img src=\"${data[0].downloadLink}\" class=\"spanimg\" />`);\r\n\r\n            pop.close();\r\n        });\r\n        return true;\r\n    }, {\r\n        title: `${lpg.upload}`,\r\n        width: 200,\r\n        height: 50,\r\n        buttons: {\r\n            ok: `${lpg.upload}`,\r\n            cancel: `${lpg.cancel}`,\r\n        },\r\n    });\r\n});\r\n\r\n\r\n\r\nfunction initForm() {\r\n    let param1={};\r\n    param1.pageIndex=0;\r\n    param1.pageSize=10;\r\n    param1.currentlng=clng;\r\n    opg.api.getboothdesignlistbyuser(param1, function (data) {\r\n        if(data.results.length>0) {\r\n            if(data.results[0].createtime!=null && data.results[0].createtime!=undefined && data.results[0].createtime!=\"\")\r\n                $(\"#applyinfo\").html(data.results[0].createtime + \"   \" + `${lpg.statustype[0]}`);\r\n            if(data.results[0].approvaltime!=null && data.results[0].approvaltime!=undefined && data.results[0].approvaltime!=\"\") {\r\n                if(data.results[0].status==\"1\")\r\n                    $(\"#approvalinfo\").html(\"<label style='color:green'>\" + data.results[0].approvaltime + \"   \" + `${lpg.statustype[1]}` + \"</label>\");\r\n                else if(data.results[0].status==\"2\")\r\n                    $(\"#approvalinfo\").html(\"<label style='color:red'>\" +data.results[0].approvaltime + \"   \" + `${lpg.statustype[2]}` + \"</label>\");\r\n            }\r\n\r\n\r\n            $(\"#standno\").val(data.results[0].standno);\r\n            $(\"#exhibitor\").val(data.results[0].exhibitor);\r\n            $(\"#company\").val(data.results[0].company);\r\n            $(\"#contactperson\").val(data.results[0].contactperson);\r\n            $(\"#contacttel\").val(data.results[0].contacttel);\r\n            $(\"#designremark\").val(data.results[0].designremark);\r\n\r\n            var picarray=data.results[0].designpic.split('|');\r\n            for(var j=0;j<picarray.length;j++)\r\n            {\r\n                if(picarray[j]!=null && picarray[j]!=undefined && picarray[j]!=\"\")\r\n                {\r\n                    if(j==0) {\r\n                      $(\"#logoPicture\").val(picarray[j]);\r\n                      $(\"#td_logoPicture\").html(`<img src=\"`+picarray[j]+`\" class=\"spanimg\" />`);\r\n                    }\r\n                    else {\r\n                        $(\"#logoPicture\" + (j+1).toString()).val(picarray[j]);\r\n                        $(\"#td_logoPicture\"+ (j+1).toString()).html(`<img src=\"`+picarray[j]+`\" class=\"spanimg\" />`);\r\n                    }\r\n                }\r\n            }\r\n\r\n            $(\"#btnSaveMain\").attr(\"disabled\",\"true\");\r\n        }\r\n        else\r\n        {\r\n            $(\"#btnSaveMain\").removeAttr(\"disabled\");\r\n        }\r\n    });\r\n}\r\n\r\n\r\ninitForm();\r\n\r\nfunction formatdate(mydate) {\r\n    var newdate;\r\n    var data = new Date(mydate);\r\n    var year = data.getFullYear();  //获取年\r\n    var month = data.getMonth() + 1;    //获取月\r\n    var day = data.getDate(); //获取日\r\n    if(month<10) {\r\n        if(day<10)\r\n            newdate= year+\"-0\"+month+\"-0\"+day;\r\n        else\r\n            newdate= year+\"-0\"+month+\"-\"+day;\r\n    }\r\n    else {\r\n        if(day<10)\r\n            newdate = year + \"-\" + month+\"-0\"+day;\r\n        else\r\n            newdate = year + \"-\" + month + \"-\" + day;\r\n    }\r\n    return newdate;\r\n}\r\n\r\n"]}