{"version":3,"sources":["/pages/logistics/translation/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport Panel from 'ts/ui/Panel.ts';\r\nimport Table from 'ts/ui/Table.ts';\r\nimport {Combo} from 'ts/ui/Combo';\r\nimport {Languages} from 'ts/util/Languages';\r\nimport {store} from '../../../ts/util/store';\r\nimport PopUp from \"../../../ts/ui/Popup\";\r\nimport {url} from \"../../../ts/util/utils\";\r\n\r\n\r\n\r\nopg.api({\r\n    'gettranslationlisttotalsumbyuser!post': 'Operation/Gettranslationlisttotalsumbyuser',\r\n\t'gettranslationlistbyuser!post': 'Operation/Gettranslationlistbyuser',\r\n    'addTranslation!post':'Operation/AddTranslation',\r\n    'addHostess!post':'Operation/AddHostess',\r\n    getCurrentUserMoreInfo: 'user/GetCurrentUserMoreInfo',\r\n});\r\n\r\nconst lpg = Languages.package;\r\n\r\nconst form = $('#tbSearch');\r\n\r\nlet orderflag=false;\r\n\r\n\r\nlet clng='en';\r\n\r\nif(localStorage.getItem(\"lngPkg\")!=null|| localStorage.getItem(\"lngPkg\")!=undefined)\r\n{\r\n    const currentlng=localStorage.getItem(\"lngPkg\");\r\n    clng=currentlng.replace(/[\"\"\"]/g,\"\");\r\n}\r\n\r\n\r\n$(\"#totalsum\").html(lpg.totalsum + \":0\");\r\n\r\n// let panel: Panel = opg.wrapPanel('#tbSearch', {\r\n// \ttitle: `${lpg.searchService}`,\r\n// \tbtnSearchText: `<i class=\"ico-find\"></i> ${lpg.search}`,\r\n// \tbtnSearchClick: function () {\r\n//         refreshtable();\r\n// \t}\r\n// });\r\n\r\nfunction refreshtable() {\r\n    let xparam = $('#tbSearch').fieldsToJson();\r\n    xparam.pageIndex = 0;\r\n    xparam.currentlng=clng;\r\n    xparam.reservetype=\"translation\";\r\n    tb.update(xparam);\r\n    opg.api.gettranslationlisttotalsumbyuser(xparam , (data)=>{\r\n        $(\"#totalsum\").html(lpg.totalsum + \":\" + data[0].totalsum);\r\n    });\r\n\r\n    // setTimeout(function () {\r\n    //     var trl=$(\"#tb\").find(\"tr\").length;\r\n\r\n    //     if(trl>2) {\r\n    //         $('#btnServiceApply').attr('disabled',\"true\");\r\n    //     }\r\n    //     else\r\n    //     {\r\n    //         $('#btnServiceApply').removeAttr(\"disabled\");\r\n    //     }\r\n\r\n    // }, 1000);\r\n}\r\n\r\n\r\n//const permission = store.get('permission');\r\nlet tbButtons = [];\r\n// tbButtons.push({id: 'btnServiceApply', className: 'btn-warning', html: `${lpg.serviceApply}`});\r\n\r\n\r\nlet tb: Table = opg('#tb').table({\r\n\tapi: opg.api.gettranslationlistbyuser,\r\n\tlazy: true,\r\n\ttitleBar: {\r\n\t\ttitle: `${lpg.list}`,\r\n\t\tbuttons: tbButtons,\r\n\t},\r\n\tcolumns: [\r\n\t\t{\r\n\t\t\ttext: `${lpg.standno}`, width: 100,\r\n\t\t\tsrc: 'standno',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `${lpg.company}`, width: 100,\r\n\t\t\tsrc: 'company',\r\n\t\t},\r\n        {\r\n            text: `${lpg.country}`, width: 100,\r\n            src: 'country',\r\n        },\r\n        {\r\n            text: `${lpg.contactperson}`, width: 100,\r\n            src: 'contactperson',\r\n        },\r\n        {\r\n            text: `${lpg.phonenum}`, width: 100,\r\n            src: 'phonenum',\r\n        },\r\n        {\r\n            text: `${lpg.email}`, width: 100,\r\n            src: 'email',\r\n        },\r\n        {\r\n            text: `${lpg.payment}`, width: 100,\r\n            src: 'payment',\r\n        },\r\n        {\r\n            text: `${lpg.reserveitemno}`, width: 100,\r\n            src: 'reserveitemno',\r\n        },\r\n        {\r\n            text: `${lpg.itemname}`, width: 100,\r\n            src: 'itemname',\r\n        },\r\n        {\r\n            text: `${lpg.description}`, width: 100,\r\n            src: 'description',\r\n        },\r\n        {\r\n            text: `${lpg.unitprice}`, width: 100,\r\n            src: 'unitprice',\r\n        },\r\n        {\r\n            text: `${lpg.reserveqty1}`, width: 100,\r\n            src: 'oneday',\r\n        },\r\n        {\r\n            text: `${lpg.reserveqty2}`, width: 100,\r\n            src: 'twoday',\r\n        },\r\n        {\r\n            text: `${lpg.reserveqty3}`, width: 100,\r\n            src: 'threeday',\r\n        },\r\n        {\r\n            text: `${lpg.hostess}`, width: 100,\r\n            src: 'hostess',\r\n            render:function (id, index, row) {\r\n                let html = ``;\r\n                if (row.hostess==='yes') {\r\n                    html += `<label class=\"deny\">${lpg.hostesstype[0]}</label>`;\r\n                    $(\"#needtranslate\").attr(\"checked\", 'checked');\r\n                }\r\n                \r\n               \r\n                return html;\r\n            }\r\n        },\r\n        {\r\n            text: `${lpg.createtime}`, width: 100,\r\n            src: 'createtime',\r\n        },\r\n        {\r\n            text: `${lpg.status}`, width: 100,\r\n            src: 'status',\r\n            render:function (id, index, row) {\r\n                let html = ``;\r\n                if (row.status==='0') {\r\n                    html += `<label class=\"apply\">${lpg.statustype[0]}</label>`;\r\n                }\r\n                else if(row.status==='1') {\r\n                    html += `<label class=\"agree\">${lpg.statustype[1]}</label>`;\r\n                    $('#btnServiceApply').attr('disabled',\"true\");\r\n                    $(\"#needtranslate\").attr('disabled',\"true\");\r\n\r\n                }\r\n                else if(row.status==='2') {\r\n                    html += `<label class=\"deny\">${lpg.statustype[2]}</label>`;\r\n                    $('#btnServiceApply').attr('disabled',\"true\");\r\n                    $(\"#needtranslate\").attr('disabled',\"true\");\r\n                }\r\n                return html;\r\n            }\r\n        }\r\n\t],\r\n\tpagination: true,\r\n});\r\n\r\nrefreshtable();\r\n\r\n\r\nconst addPage = __uri('/pages/logistics/translation/translationlist.html');\r\n\r\n\r\nlet xparam={};\r\nopg.api.getCurrentUserMoreInfo(xparam, function (data){\r\n    //console.log(data);\r\n    $(\"#country\").val(data[0].country);\r\n    $(\"#contactperson\").val(data[0].firstname + \" \" + data[0].lastname);\r\n    $(\"#phonenum\").val(data[0].mobile);\r\n    $(\"#email\").val(data[0].email);\r\n    \r\n\r\n});\r\n\r\n\r\n\r\n$(\"#btnServiceApply\").click(function(){\r\n    \r\n    let param = $('#tbSearch').fieldsToJson();\r\n    param.reservetype = \"translation\";\r\n    let reservetype = `${param.reservetype}`;\r\n\r\n    \r\n\r\n    if(orderflag || (param.country!=\"\" && param.contactperson!=\"\" && param.phonenum!=\"\" && param.email!=\"\" && param.payment!=\"\"))\r\n    {\r\n        let pop = opg.popTop(`<iframe src=\"${url.setParam(addPage,{reservetype})}\"></iframe>` , {\r\n            title: `${lpg.serviceApplylist}`,\r\n            btnMax: false,\r\n            width: 900,\r\n            height: 550,\r\n            buttons: {\r\n                send: {\r\n                    className: 'btn-success',\r\n                    text: lpg.sendApply,\r\n                    onClick: function (i, ifr) {\r\n                        let pop2=top.opg.confirm(lpg.submitinfo+\"<br/>\" + lpg.submitinfo2, function() {\r\n                            let resource = ifr.getTranslationFill();\r\n                            resource.country=param.country;\r\n                            resource.contactperson=param.contactperson;\r\n                            resource.phonenum=param.phonenum;\r\n                            resource.email=param.email;\r\n                            resource.payment=param.payment;\r\n                            resource.hostess=orderflag==true?\"yes\":\"no\";\r\n                            if (resource) {\r\n                                sendTranslation(resource, pop,pop2);\r\n                            }\r\n                        });\r\n\r\n                        return true;\r\n                    }\r\n                },\r\n                cancel: lpg.cancel\r\n            },\r\n            onClose: function () {\r\n\r\n            }\r\n        });\r\n    }\r\n    else\r\n    {\r\n        top.opg.confirm(lpg.omitinfo,function() {\r\n\r\n        });\r\n    }\r\n});\r\n\r\n\r\n$(\"#needtranslate\").click(function () {\r\n    if ($(this).prop(\"checked\")) {\r\n        orderflag=true;\r\n    } \r\n    else {  \r\n        orderflag=false;\r\n    }\r\n\r\n    sendHostess();\r\n});\r\n\r\n// $(\"#btnSearch\").click(function(){\r\n//     refreshtable();\r\n// });\r\n\r\nfunction sendTranslation(resource, pop: PopUp,pop2: PopUp) {\r\n\r\n\topg.api.addTranslation(resource, function (data) {\r\n\t\tpop.close();\r\n        pop2.close();\r\n\t\trefreshtable();\r\n\t});\r\n}\r\n\r\nfunction sendHostess() {\r\n    let param = $('#tbSearch').fieldsToJson();\r\n    let resource = {};\r\n    resource.reservetype = \"translation\";\r\n    resource.country=param.country;\r\n    resource.contactperson=param.contactperson;\r\n    resource.phonenum=param.phonenum;\r\n    resource.email=param.email;\r\n    resource.payment=\"\";\r\n    resource.hostess=orderflag==true?\"yes\":\"no\";\r\n    opg.api.addHostess(resource, function (data) {\r\n        \r\n\t\trefreshtable();\r\n\t});\r\n}"]}