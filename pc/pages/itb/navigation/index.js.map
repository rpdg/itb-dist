{"version":3,"sources":["/pages/itb/navigation/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport {Languages} from '/ts/util/Languages';\r\nimport {store} from \"../../../ts/util/store\";\r\nimport {request} from 'ts/util/utils';\r\n\r\nconst enum markerType {\r\n\tblue = './assets/image/blueImageMarker.png',\r\n\tred = './assets/image/redImageMarker.png',\r\n}\r\n\r\nopg.api({\r\n\t'GetMapInitParameters': 'AppRemote/GetMapInitParameters',\r\n\t'GetFidByBooth':'ExhibitionArea/GetFidByBooth',\r\n    'GetFidByCompanyOrBooth':'ExhibitionArea/GetFidByCompanyOrBooth'\r\n});\r\n\r\n\r\n\r\nconst booth=request['booth'];\r\nlet fid='';\r\nif(booth!=null && booth!=\"\") {\r\n    opg.api.GetFidByBooth({booth:booth},function(data2){\r\n        if(data2.length>0) {\r\n            fid=data2[0].fid;\r\n        }\r\n    });\r\n}\r\n\r\n\r\nlet clng = 'en';\r\n\r\nif (localStorage.getItem(\"lngPkg\") != null || localStorage.getItem(\"lngPkg\") != undefined) {\r\n    const currentlng = localStorage.getItem(\"lngPkg\");\r\n    clng = currentlng.replace(/[\"\"\"]/g, \"\");\r\n}\r\n\r\nclass FMap {\r\n\r\n\tmap: fengmap.FMMap;\r\n\tnav: fengmap.FMNavigation;\r\n\tsearchAnalyser: fengmap.SearchAnalyser;\r\n\r\n\tclickCount: number;\r\n\tlastCoord: fengmap.MapPoint;\r\n\r\n\r\n\toSeachText: HTMLInputElement;\r\n\toHotwords: HTMLUListElement;\r\n\r\n\tconstructor(mapID: string, appName: string, appKey: string, mapServer: string, initCoord?: string) {\r\n\r\n\t\tthis.clickCount = 0;\r\n\r\n\t\twindow['map'] = this.map = new fengmap.FMMap({\r\n\t\t\t//渲染dom\r\n\t\t\tcontainer: document.getElementById('fengMap'),\r\n\t\t\t//地图数据位置\r\n\t\t\tmapServerURL: mapServer + mapID,\r\n\t\t\t//主题数据位置\r\n\t\t\tmapThemeURL: mapServer + 'theme',\r\n\t\t\t//设置主题\r\n\t\t\tdefaultThemeName: mapID,\r\n\t\t\t// 默认比例尺级别设置为20级\r\n\t\t\tdefaultMapScaleLevel: 20,\r\n\t\t\t//对不可见图层启用透明设置 默认为true\r\n\t\t\tfocusAlphaMode: false,\r\n\t\t\t//关闭聚焦层切换的动画显示\r\n\t\t\tfocusAnimateMode: false,\r\n\t\t\t//对不聚焦图层启用透明设置，当focusAlphaMode = true时有效\r\n\t\t\tfocusAlpha: 0.1,\r\n\t\t\t//开启2维，3维切换的动画显示\r\n\t\t\tviewModeAnimateMode: true,\r\n\t\t\t//设置最大倾斜角\r\n\t\t\tdefaultMaxTiltAngle: 80,\r\n\t\t\t//设置倾斜角，默认倾斜角为60度\r\n\t\t\tdefaultTiltAngle: 30,\r\n\t\t\t//开发者申请应用下web服务的key\r\n\t\t\tkey: appKey,\r\n\t\t\t//开发者申请应用名称\r\n\t\t\tappName: appName,\r\n\t\t});\r\n\r\n\r\n\t\tthis.map.openMapById(mapID);\r\n\r\n\r\n\t\t//地图加载完成回调\r\n\t\tthis.map.on('loadComplete', () => {\r\n\t\t\tthis.initMapFunctions();\r\n\r\n\t\t\tif (initCoord) {\r\n\t\t\t\tlet searchReq = new fengmap.FMSearchRequest(fengmap.FMNodeType.MODEL);\r\n\t\t\t\tsearchReq.FID(initCoord);\r\n\t\t\t\tthis.map.searchAnalyser.query(searchReq, (request, result) => {\r\n\t\t\t\t\tlet models = result;\r\n\t\t\t\t\tif (models != null && models.length > 0) {\r\n\t\t\t\t\t\tfor (let i in models) {\r\n\t\t\t\t\t\t\tlet model = models[i];\r\n\t\t\t\t\t\t\tconsole.log(model);\r\n\t\t\t\t\t\t\tlet coord = {\r\n\t\t\t\t\t\t\t\tx: model.mapCoord.x,\r\n\t\t\t\t\t\t\t\ty: model.mapCoord.y,\r\n\t\t\t\t\t\t\t\tgroupID: model.groupID\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tthis.addMarkers(model.groupID, model.mapCoord.x, model.mapCoord.y);\r\n\r\n\t\t\t\t\t\t\tthis.map.visibleGroupIDs = [coord.groupID];\r\n\t\t\t\t\t\t\tthis.map.focusGroupID = coord.groupID;\r\n\t\t\t\t\t\t\tthis.map.moveTo(coord);\r\n\r\n\t\t\t\t\t\t\t//地图上当前设置的模型元素处于高亮状态。\r\n\t\t\t\t\t\t\t//如果最后一个参数设置为true,storeSelect(model,true,true)，表示之前的和当前的模型都处于高亮转态。可使用map.selectNull()方法清除。\r\n\t\t\t\t\t\t\tthis.map.storeSelect(model, true, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tinitMapFunctions() {\r\n\t\t//默认楼层加载完后不显示，需自定义设置要显示的楼层和聚焦层\r\n\t\tthis.map.visibleGroupIDs = this.map.groupIDs;\r\n\t\tthis.map.focusGroupID = this.map.groupIDs[0];\r\n\r\n\r\n\t\tlayerGroup.init(this.map.listGroups, this.map.focusGroupID);\r\n\r\n\r\n\t\t/*\r\n\t\t//获取搜索类\r\n\t\tthis.searchAnalyser = this.map.searchAnalyser;\r\n\t\t//\r\n\t\tthis.initSearcher();\r\n\t\t*/\r\n\r\n\t\tthis.nav = new fengmap.FMNavigation({\r\n\t\t\tmap: this.map,\r\n\t\t\tlineStyle: {\r\n\t\t\t\tlineType: fengmap.FMLineType.FMARROW,\r\n\t\t\t\tlineWidth: 6,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tlet self = this;\r\n\t\t//点击地图事件。开始选点开始后，点击地图一次为起点，第二次点击为终点\r\n\t\tthis.map.on('mapClickNode', function (event) {\r\n\t\t\tif (event.nodeType == fengmap.FMNodeType.MODEL) {\r\n\t\t\t\tlet modelLabel = event.label;\r\n\t\t\t\tlet coord;\r\n\r\n\t\t\t\t// 如果拾取的模型没有Label对象，则使用模型中心点的坐标\r\n\t\t\t\t// 有则使用与模型对应的Label对象的坐标。\r\n\t\t\t\tif (!modelLabel) {\r\n\t\t\t\t\tcoord = {\r\n\t\t\t\t\t\tx: event.mapCoord.x,\r\n\t\t\t\t\t\ty: event.mapCoord.y,\r\n\t\t\t\t\t\tgroupID: event.groupID,\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcoord = {\r\n\t\t\t\t\t\tx: modelLabel.mapCoord.x,\r\n\t\t\t\t\t\ty: modelLabel.mapCoord.y,\r\n\t\t\t\t\t\tgroupID: event.groupID,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(modelLabel , coord);\r\n\r\n\t\t\t\t//第三次点击清除路径，重现设置起点起点\r\n\t\t\t\tif (self.clickCount == 2) {\r\n\t\t\t\t\tself.nav.clearAll();\r\n\t\t\t\t\tself.clickCount = 0;\r\n\t\t\t\t\tself.lastCoord = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//第一次点击添加起点\r\n\t\t\t\tif (self.clickCount == 0) {\r\n\t\t\t\t\tself.lastCoord = coord;\r\n\t\t\t\t\tself.nav.setStartPoint({\r\n\t\t\t\t\t\tx: coord.x,\r\n\t\t\t\t\t\ty: coord.y,\r\n\t\t\t\t\t\tgroupID: coord.groupID,\r\n\t\t\t\t\t\turl: markerType.blue,\r\n\t\t\t\t\t\tsize: 32,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (self.clickCount === 1) { //添加终点并画路线\r\n\t\t\t\t\t//判断起点和终点是否相同\r\n\t\t\t\t\tif (self.lastCoord.x === coord.x) {\r\n\t\t\t\t\t\t//$('#message').attr(\"class\", \"alert alert-warning\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//$('#message').attr(\"class\", \"alert alert-warning hidden\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.nav.setEndPoint({\r\n\t\t\t\t\t\tx: coord.x,\r\n\t\t\t\t\t\ty: coord.y,\r\n\t\t\t\t\t\tgroupID: coord.groupID,\r\n\t\t\t\t\t\turl: markerType.red,\r\n\t\t\t\t\t\tsize: 32,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// 画导航线\r\n\t\t\t\t\tself.nav.drawNaviLine();\r\n\t\t\t\t}\r\n\t\t\t\tself.clickCount++;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfindCoordinate(fid) {\r\n\t\tthis.oHotwords.style.display = 'none';\r\n\t\tlet searchReq = new fengmap.FMSearchRequest(fengmap.FMNodeType.MODEL);\t\t//设置查询地图元素类型\r\n\t\tsearchReq.FID(fid);\r\n\t\tthis.searchAnalyser.query(searchReq, (request, result) => {\r\n\t\t\t//result 为查询到的结果集。\r\n\t\t\tlet models = result[0];\r\n\t\t\tif (models != null) {\r\n\t\t\t\tthis.fillData(models);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfillData(model) {\r\n\t\tthis.addMarkers(model.groupID, model.mapCoord.x, model.mapCoord.y);\r\n\r\n\t\tlet coord = {\r\n\t\t\tx: model.mapCoord.x,\r\n\t\t\ty: model.mapCoord.y,\r\n\t\t\tgroupID: model.groupID,\r\n\t\t};\r\n\t\tthis.moveTo(coord); //定位跳转\r\n\r\n\t\t//地图上当前设置的模型元素处于高亮状态。\r\n\t\t//如果最后一个参数设置为true,storeSelect(model,true,true)，表示之前的和当前的模型都处于高亮转态。可使用map.selectNull()方法清除。\r\n\t\tthis.map.storeSelect(model, true, false);\r\n\r\n\t}\r\n\r\n\tmoveTo(coord: fengmap.MapPoint) {\r\n\t\tthis.map.visibleGroupIDs = [coord.groupID];\r\n\t\tthis.map.focusGroupID = coord.groupID;\r\n\t\tthis.map.moveTo(coord);\r\n\t}\r\n\r\n\t//添加Marker\r\n\taddMarkers(gid, X, Y) {\r\n\t\tthis.removeMarkers();\r\n\t\tlet group = this.map.getFMGroup(gid);\r\n\r\n\t\t//返回当前层中第一个imageMarkerLayer,如果没有，则自动创建\r\n\t\tlet layer = group.getOrCreateLayer('imageMarker');\r\n\r\n\t\tlet im = new fengmap.FMImageMarker({\r\n\t\t\tx: X,\r\n\t\t\ty: Y,\r\n\t\t\turl: './assets/image/blueImageMarker.png',\r\n\t\t\tsize: 32,\r\n\t\t\tcallback: function () {\r\n\t\t\t\tim.alwaysShow();\r\n\t\t\t},\r\n\t\t});\r\n\t\tlayer.addMarker(im);\r\n\t}\r\n\r\n\tremoveMarkers() {\r\n\t\t//获取多楼层Marker\r\n\t\tthis.map.callAllLayersByAlias('imageMarker', (layer) => {\r\n\t\t\tlayer.removeAll();\r\n\t\t});\r\n\t}\r\n\r\n\tinitSearcher() {\r\n\t\tthis.oSeachText = document.getElementById('seachText') as HTMLInputElement;\r\n\t\tthis.oHotwords = document.getElementById('hotwords') as HTMLUListElement;\r\n\r\n\t\tlet that = this;\r\n\t\t//创建提示下拉框\r\n\t\tlet createLi = function (data) {\r\n\t\t\tthat.oHotwords.innerHTML = '';\r\n\t\t\tlet li = '';\r\n\t\t\tfor (let i in data) {\r\n\t\t\t\tlet model = data[i];\r\n\t\t\t\tli += '<li data-id=\"' + model.FID + '\">' + (!model.name ? '空' : model.name) + '</li>';\r\n\t\t\t}\r\n\r\n\t\t\tthat.oHotwords.innerHTML = li;\r\n\t\t\tlet aLi = that.oHotwords.getElementsByTagName('li') as HTMLLIElement[];\r\n\t\t\tfor (let i = 0; i < aLi.length; i++) {\r\n\t\t\t\t(function (i) {\r\n\t\t\t\t\taLi[i].onclick = function () {\r\n\t\t\t\t\t\tlet index = i;\r\n\t\t\t\t\t\tthat.oSeachText.value = this.innerHTML;\r\n\t\t\t\t\t\tlet fid = this.attributes['data-id'].nodeValue;\r\n\t\t\t\t\t\tthat.findCoordinate(fid);\r\n\t\t\t\t\t\tthat.oHotwords.style.display = 'none';\r\n\t\t\t\t\t};\r\n\t\t\t\t})(i);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//根据关键字查询店铺\r\n\t\tthis.oSeachText.addEventListener('keyup', (e) => {\r\n\t\t\tlet keyword = this.oSeachText.value;\r\n\t\t\tif (keyword !== '') {\r\n\t\t\t\tlet searchReq = new fengmap.FMSearchRequest(fengmap.FMNodeType.MODEL);\r\n\t\t\t\tsearchReq.keyword(keyword);\r\n\t\t\t\tthis.searchAnalyser.query(searchReq, (request, result) => {\r\n\t\t\t\t\tlet models = result;\r\n\t\t\t\t\tif (models != null && models.length > 0) {\r\n\t\t\t\t\t\tthis.oHotwords.style.display = 'block';\r\n\t\t\t\t\t\tcreateLi(models);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.oHotwords.style.display = 'none';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\n// let map = window['MapConfig'];\r\n// new FMap(map.id, map.name, map.key, map.server);\r\n\r\nlet param = {};\r\n\r\nsetTimeout(function () {\r\n    opg.api.GetMapInitParameters(param, function (data) {\r\n        if(data.length>0) {\r\n            for (var i = 0; i < data.length; i++) {\r\n                if (data[i].value5 == clng) {\r\n                    new FMap(data[i].value2, data[i].value3, data[i].value4, data[i].value1,fid);\r\n                }\r\n            }\r\n        }\r\n    });\r\n},1000);\r\n\r\n\r\ndocument.getElementById('btnSearch').addEventListener('click', function (evt) {\r\n    let val = (document.getElementById('iptKeyword') as HTMLInputElement).value;\r\n    if (val) {\r\n        opg.api.GetFidByCompanyOrBooth({companyorbooth: val}, function (data2) {\r\n            if (data2.length > 0) {\r\n                location.href = 'index.html?booth=' + data2[0].booth_no;\r\n            }\r\n        });\r\n    }\r\n}, false);\r\n\r\n"]}