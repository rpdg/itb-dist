{"version":3,"sources":["/pages/itb/wishlist/old_view.ts"],"names":[],"mappings":"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","file":"old_view.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport Panel from 'ts/ui/Panel.ts';\r\nimport Table from 'ts/ui/Table.ts';\r\nimport {Combo} from 'ts/ui/Combo';\r\nimport {Languages} from 'ts/util/Languages';\r\nimport {store} from '../../../ts/util/store';\r\nimport PopUp from \"../../../ts/ui/Popup\";\r\nimport {url} from \"../../../ts/util/utils\";\r\nimport {api} from \"../../../ts/util/api\";\r\n\r\nopg.api({\r\n    'getBuyerChooseExhibitionWishlist': 'buyer/GetBuyerChooseExhibitionWishlist',\r\n    'exhibitionChooseWishListResult': 'exhibition/ExhibitionChooseWishListResultForView',\r\n    'delBuyerWhilistByExhibitionBarCode': 'buyer/DelBuyerWhilistByExhibitionBarCode',\r\n    'delExhibtionWhilistByBuyerBarCode': 'exhibition/DelExhibtionWhilistByBuyerBarCode',\r\n    'getCurrentUserInfoAndMenus': 'user/GetCurrentUserInfoAndMenus',\r\n});\r\n\r\nconst lpg = Languages.package;\r\n\r\nlet clng='en';\r\n\r\nif(localStorage.getItem(\"lngPkg\")!=null|| localStorage.getItem(\"lngPkg\")!=undefined)\r\n{\r\n    const currentlng=localStorage.getItem(\"lngPkg\");\r\n    clng=currentlng.replace(/[\"\"\"]/g,\"\");\r\n}\r\n\r\nlet RoleName = localStorage.getItem('RoleName').replace(/[\"\"\"]/g,\"\");\r\nlet curStage='';\r\nlet needapi='';\r\n\r\nopg.api.getCurrentUserInfoAndMenus({type:1}, function (data){\r\n    curStage=data.stage[0].name;\r\n    var timeout=setTimeout(function () {\r\n        refreshtable();\r\n    }, 1000);\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction refreshtable() {\r\n    if (curStage === \"Wishlist\") {\r\n        $(\"#btnselected\").show();\r\n        $(\"#btnselected\").html(lpg.btnselected);\r\n    }\r\n    else {\r\n        $(\"#btnselected\").hide();\r\n        $(\"#btnselected\").html(lpg.btnselected);\r\n    }\r\n    tb.update();\r\n}\r\n\r\nif (RoleName === \"buyer\") {\r\n    needapi=`getBuyerChooseExhibitionWishlist`;\r\n}\r\nelse if (RoleName === \"exhibition\") {\r\n    needapi=`exhibitionChooseWishListResult`;\r\n}\r\n\r\n\r\nlet tb: Table = opg('#tb').table({\r\n    api: opg.api[needapi],\r\n    lazy: true,\r\n    titleBar: {\r\n        title: `${lpg.list}`\r\n    },\r\n    columns: [\r\n        {\r\n            text: `${lpg.th1}`, width: 300,\r\n            src: 'company',\r\n            render:function(id, index, row) {\r\n                let html = `${row.company} 【` + ` ${row.Name}】`;\r\n                return html;\r\n            }\r\n        },\r\n        {\r\n            text: `${lpg.th2}`, width: 100,\r\n            src: 'applieddatetime',\r\n        },\r\n        {\r\n            text: `${lpg.th3}`, width: 100,\r\n            src: 'barcode',\r\n            render:function (id, index, row) {\r\n                let html = `<button data-id=\"${row.barcode}\"  class=\"btn-mini btn-danger\" >${lpg.th4}</button> `;\r\n                return html;\r\n            }\r\n        }\r\n    ],\r\n    pagination: false,\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\ntb.tbody.on('click', '.btn-danger', function () {\r\n    let btn = $(this), barcode = btn.data('id');\r\n    let param={};\r\n    param.barcode=barcode;\r\n\r\n    let pop: PopUp = top.opg.confirm(`${lpg.Content}`, function () {\r\n        if (RoleName == \"buyer\" && curStage==='Wishlist') {\r\n            opg.api.delBuyerWhilistByExhibitionBarCode({exhbitionBarCode: barcode}, (data) => {\r\n                tb.update();\r\n            });\r\n        }\r\n        else if (RoleName == \"exhibition\"  && curStage==='Wishlist') {\r\n            opg.api.delExhibtionWhilistByBuyerBarCode({buyerBarCode: barcode}, (data) => {\r\n                tb.update();\r\n            });\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    }, {\r\n        title: `${lpg.Tips}`,\r\n        buttons: {\r\n            ok: `${lpg.okb}`,\r\n            cancel: `${lpg.cancelb}`\r\n        },\r\n    });\r\n\r\n});\r\n\r\n\r\n$(\"#btnselected\").click(function () {\r\n    location.href=\"index.html\";\r\n});\r\n\r\n\r\nfunction formatdate(mydate) {\r\n    var newdate;\r\n    var data = new Date(mydate);\r\n    var year = data.getFullYear();  //获取年\r\n    var month = data.getMonth() + 1;    //获取月\r\n    var day = data.getDate(); //获取日\r\n    if(month<10) {\r\n        if(day<10)\r\n            newdate= year+\"-0\"+month+\"-0\"+day;\r\n        else\r\n            newdate= year+\"-0\"+month+\"-\"+day;\r\n    }\r\n    else {\r\n        if(day<10)\r\n            newdate = year + \"-\" + month+\"-0\"+day;\r\n        else\r\n            newdate = year + \"-\" + month + \"-\" + day;\r\n    }\r\n    return newdate;\r\n}\r\n\r\n"]}