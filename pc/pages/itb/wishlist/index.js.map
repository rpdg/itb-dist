{"version":3,"sources":["/pages/itb/wishlist/index.ts"],"names":[],"mappings":";;;AAAA,oDAAoD;AACpD,4DAA4D;;AAE5D,sCAA2C;AAC3C,0CAA+C;AAC/C,kDAAuD;AACvD,iCAAkC;AAElC,SAAG,CAAC;IACH,kBAAkB,EAAE,kCAAkC;IACtD,eAAe,EAAE,2CAA2C;IAC5D,iBAAiB,EAAE,6CAA6C;IAChE,iBAAiB,EAAE,qCAAqC;IACxD,yBAAyB,EAAE,uCAAuC;IAElE,aAAa,EAAE,wBAAwB;IACvC,UAAU,EAAE,sCAAsC;IAClD,YAAY,EAAE,wCAAwC;IACtD,YAAY,EAAE,2BAA2B;IACzC,oBAAoB,EAAE,6BAA6B;CACnD,CAAC,CAAC;AAEH,IAAM,GAAG,GAAG,qBAAS,CAAC,OAAO,CAAC;AAC9B,IAAI,IAAI,GAAG,IAAI,CAAC;AAEhB,SAAG,CAAC,eAAe,CAAC,GAAG,CAAC,SAAS,EAAE,UAAS,IAAI,EAAE,KAAK,EAAE,QAAQ;IAChE,IAAI,IAAI,KAAK,GAAG,IAAI,KAAK,KAAK,wCAAwC,EAAE;QACvE,IAAI,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QAC5B,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,KAAG,QAAU,CAAC,CAAC;KAC/B;AACF,CAAC,CAAC,CAAC;AAEH,SAAG,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,EAAE,UAAS,IAAI,EAAE,KAAK,EAAE,QAAQ;IAC3D,IAAI,IAAI,KAAK,GAAG,IAAI,KAAK,KAAK,wCAAwC,EAAE;QACvE,IAAI,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QAC5B,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,KAAG,QAAU,EAAE,cAAY,CAAC,CAAC,CAAC;KAC9C;AACF,CAAC,CAAC,CAAC;AAEH,SAAG,CAAC,kBAAkB,CAAC,GAAG,CAAC,SAAS,EAAE,UAAS,IAAI,EAAE,KAAK,EAAE,QAAQ;IACnE,IAAI,IAAI,KAAK,GAAG,IAAI,KAAK,KAAK,+BAA+B,EAAE;QAC9D,gEAAgE;QAChE,IAAI,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;QAC3B,uBAAuB;QAEvB,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,KAAG,QAAU,EAAE,cAAY,CAAC,CAAC,CAAC;KAC9C;AACF,CAAC,CAAC,CAAC;AAEH,IAAI,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,IAAI,IAAI,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,SAAS,EAAE;IAC1F,IAAM,UAAU,GAAG,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAClD,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;CACxC;AAED,IAAI,GAAG,GAAG,aAAK,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC;AAE1E,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;AAEpC,IAAI,MAAM,GAAG,GAAG,KAAK,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,YAAY,CAAC;AAE3D,IAAI,UAAU,GAAG,KAAK,CAAC,WAAW,CAAC,CAAC;AAEpC,IAAI,UAAU,GAAG,EAAE,CAAC;AAEpB,SAAG,CAAC,GAAG,GAAG,UAAU,CAAC,CAAC,cAAI;IACzB,UAAU,EAAE,CAAC;IAEb,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;QACtB,IAAI,GAAG,IAAI,YAAY;YAAE,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,cAAY,CAAC,CAAC,CAAC;;YACjE,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,cAAY,CAAC,CAAC,CAAC;KAClD;IAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACrC,IAAI,IAAI,GAAG,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;QAC3D,IAAI,KAAK,GAAG,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;QAEvD,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,SAAS,IAAI,IAAI,IAAI,IAAI,EAAE;YACpD,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;SAC5B;aAAM;YACN,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,EAAE,CAAC;SAC1B;QACD,IAAI,KAAK,IAAI,EAAE,IAAI,KAAK,IAAI,SAAS,IAAI,KAAK,IAAI,IAAI,EAAE;YACvD,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,KAAK,CAAC;SACxB;aAAM;YACN,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,EAAE,CAAC;SACrB;KACD;IAED,oBAAoB;IAEpB,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,SAAS,GAAG,QAAQ,CAAC,YAAY,EAAE,EAAE,IAAI,QAAE,GAAG,EAAE,qBAAS,CAAC,OAAO,EAAE,CAAC,CAAC;IAEvG,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;QAClC,QAAQ,EAAE,KAAK;QACf;;;YAGI;QACJ,UAAU,EAAE;YACX,MAAM,EAAE,qBAAqB;YAC7B,MAAM,EAAE,qBAAqB;SAC7B;QACD,EAAE,EAAE;YACH,WAAW,EAAE;gBACZ,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;oBAC7C,IAAI,QAAQ,GAAG,GAAG,CAAC,aAAa,CAAC,CAAC;oBAClC,aAAG,CAAC,OAAO,CACV,QAAQ,EACR;wBACC,IAAI,cAAc,GAAG,EAAE,CAAC;wBACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;4BAC5C,IAAI,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;4BAC9B,IAAI,CAAC,CAAC,OAAO,IAAI,UAAU,CAAC,EAAE;gCAC7B,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;6BAC7B;yBACD;wBACD,IAAI,cAAc,CAAC,MAAM,EAAE;4BAC1B,IAAI,KAAK,GAAG,EAAE,QAAQ,EAAE,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;4BAClD,SAAG,CAAC,GAAG,GAAG,UAAU,CAAC,CAAC,KAAK,EAAE;gCAC5B,QAAQ,CAAC,IAAI,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC;4BACrC,CAAC,CAAC;yBACF;6BACI;4BACJ,QAAQ,CAAC,IAAI,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC;yBACpC;oBACF,CAAC,EACD;wBACC,KAAK,EAAE,GAAG;wBACV,OAAO,EAAE;4BACR,EAAE,EAAE,GAAG,CAAC,cAAc,CAAC;4BACvB,MAAM,EAAE,GAAG,CAAC,UAAU,CAAC;yBACvB;qBACD,CACD,CAAC;iBACF;YACF,CAAC;SACD;KACD,CAAC,CAAC;IAEH,CAAC,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC;QAAA,iBA4CxB;QA3CA,IAAI,KAAK,GAAG,MAAM,CAAC,SAAS,EAC3B,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;QACpB,IAAI,QAAQ,GAAG,MAAM,GAAG,SAAS,EAChC,KAAK,GAAG,EAAE,CAAC;QACZ,yDAAyD;QACzD,KAAK,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;QAC/B,SAAG,CAAI,GAAG,SAAI,IAAI,CAAC,EAAI,CAAC,CAAC,KAAK,EAAE,aAAG;YAClC,IAAI,KAAG,KAAI,CAAC,EAAI,KAAK,MAAM,EAAE;gBAC5B,IAAI,KAAG,GAAG,aAAG,CAAC,MAAM,CACnB,CAAC,CACA,4JACC,GAAG,CAAC,aAAa,WACV,CACR,EACD;oBACC,UAAU,EAAE,IAAI;iBAChB,CACD,CAAC;gBACF,UAAU,CAAC,cAAM,YAAG,CAAC,KAAK,EAAE,EAAX,CAAW,EAAE,IAAI,CAAC,CAAC;aACpC;iBAAM,IAAI,KAAG,KAAI,CAAC,EAAI,KAAK,QAAQ,EAAE;gBACrC,IAAI,KAAG,GAAG,aAAG,CAAC,MAAM,CACnB,CAAC,CACA,4JACC,GAAG,CAAC,eAAe,WACZ,CACR,EACD;oBACC,UAAU,EAAE,IAAI;iBAChB,CACD,CAAC;gBACF,UAAU,CAAC,cAAM,YAAG,CAAC,KAAK,EAAE,EAAX,CAAW,EAAE,IAAI,CAAC,CAAC;aACpC;YAED,gCAAgC;YAChC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;YAEhC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACpB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBACtB,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;aAC1B;iBAAM;gBACN,cAAc,EAAE,CAAC;aACjB;QACF,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,SAAS,cAAc;IACtB,aAAG,CAAC,OAAO,CACV,GAAG,CAAC,cAAc,EAClB,UAAS,CAAC;QACT,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,EAAE;YACjB,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACtB;aAAM;YACN,QAAQ,CAAC,IAAI,GAAG,UAAU,CAAC;SAC3B;IACF,CAAC,EACD;QACC,KAAK,EAAE,GAAG,CAAC,OAAO;QAClB,OAAO,EAAE;YACR,EAAE,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG;YACf,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,EAAE;SAClB;KACD,CACD,CAAC;AACH,CAAC;AAED,IAAI,SAAS,GAAG,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,CAAC;AAElF,SAAS,UAAU;IAClB,SAAG,CAAI,GAAG,YAAS,CAAC,CAAC,aAAG;QACvB,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC,EAAE;YACnC,IAAI,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;YAC5B,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,KAAG,QAAU,EAAE;gBAC9B,QAAQ,CAAC,IAAI,GAAG,qBAAqB,CAAC;YACvC,CAAC,CAAC,CAAC;SACH;aAAM;YACN,GAAG,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YAChE,IAAI,IAAI,GAAG;gBACV,GAAG;gBACH,MAAM,EAAE,GAAG;aACX,CAAC;YAEF,IAAI,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;YAE3B,IAAI,QAAM,GAAG,aAAG,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC;gBAC5B,UAAU,EAAE,KAAK;gBACjB,KAAK,EAAE,GAAG;gBACV,MAAM,EAAE,GAAG;aACX,CAAC,CAAC;YAEH,CAAC,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,UAAS,CAAC;gBACjC,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,QAAM,CAAC,KAAK,EAAE,CAAC;gBACf,wBAAwB;YACzB,CAAC,CAAC,CAAC;YACH,CAAC,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,UAAS,CAAC;gBAClC,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,QAAQ,CAAC,IAAI,GAAG,UAAU,CAAC;YAC5B,CAAC,CAAC,CAAC;SACH;IACF,CAAC,CAAC,CAAC;AACJ,CAAC;AAED,SAAS,yBAAyB,CAAC,OAAO;IACzC,IAAI,OAAO,IAAI,IAAI,IAAI,OAAO,IAAI,SAAS,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,KAAK,EAAE;QACpG,IAAI,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAChC,OAAO,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC5C;;QAAM,OAAO,EAAE,CAAC;AAClB,CAAC","file":"index.js","sourcesContent":["/// <reference path=\"../../../@types/jquery.d.ts\" />\r\n/// <reference path=\"../../../@types/jquery.plugins.d.ts\" />\r\n\r\nimport { api } from '../../../ts/util/api';\r\nimport { store } from '../../../ts/util/store';\r\nimport { Languages } from '../../../ts/util/Languages';\r\nimport opg from '../../../ts/opg';\r\n\r\napi({\r\n\texhibition_getList: 'exhibition/GetExhibitionWishlist',\r\n\texhibition_like: 'exhibition/LikeBuyerForExhibtionByBarCode',\r\n\texhibition_unlike: 'exhibition/UnLikeBuyerForExhibtionByBarCode',\r\n\texhibition_result: 'exhibition/ExhibitionWishListResult',\r\n\t'exhibition_ignores!post': 'exhibition/UpExhibitionWishlistStatus',\r\n\r\n\tbuyer_getList: 'buyer/GetBuyerWishlist',\r\n\tbuyer_like: 'buyer/LikeExhibtionForBuyerByBarCode',\r\n\tbuyer_unlike: 'buyer/UnLikeExhibtionForBuyerByBarCode',\r\n\tbuyer_result: 'buyer/BuyerWishListResult',\r\n\t'buyer_ignores!post': 'buyer/UpBuyerWishlistStatus'\r\n});\r\n\r\nconst lng = Languages.package;\r\nlet clng = 'en';\r\n\r\napi.exhibition_like.set('onError', function(code, error, callback) {\r\n\tif (code === 200 && error === 'LikeBuyerForExhibtionByBarCode_Error01') {\r\n\t\tlet errorMsg = lng['tips3'];\r\n\t\ttop.opg.confirm(`${errorMsg}`);\r\n\t}\r\n});\r\n\r\napi.buyer_like.set('onError', function(code, error, callback) {\r\n\tif (code === 200 && error === 'LikeExhibtionForBuyerByBarCode_Error01') {\r\n\t\tlet errorMsg = lng['tips3'];\r\n\t\ttop.opg.confirm(`${errorMsg}`, function() {});\r\n\t}\r\n});\r\n\r\napi.exhibition_getList.set('onError', function(code, error, callback) {\r\n\tif (code === 200 && error === 'GetExhibitionWishlist_Error01') {\r\n\t\t//location.href = __uri('../wishlist/result.html?isemployee=1');\r\n\t\tlet errorMsg = lng['tips'];\r\n\t\t//alert(`${errorMsg}`);\r\n\r\n\t\ttop.opg.confirm(`${errorMsg}`, function() {});\r\n\t}\r\n});\r\n\r\nif (localStorage.getItem('lngPkg') != null || localStorage.getItem('lngPkg') != undefined) {\r\n\tconst currentlng = localStorage.getItem('lngPkg');\r\n\tclng = currentlng.replace(/[\"\"\"]/g, '');\r\n}\r\n\r\nlet act = store.get('RoleName') === 'exhibition' ? 'exhibition' : 'buyer';\r\n\r\ntemplate.defaults.imports.act = act;\r\n\r\nlet target = act === 'exhibition' ? 'buyer' : 'exhibition';\r\n\r\nlet resultPage = __uri('view.html');\r\n\r\nlet checkedSet = {};\r\n\r\napi[act + '_getList'](data => {\r\n\tshowResult();\r\n\r\n\tif (data.length === 0) {\r\n\t\tif (act == 'exhibition') top.opg.confirm(lng['tips4'], function() {});\r\n\t\telse top.opg.confirm(lng['tips5'], function() {});\r\n\t}\r\n\r\n\tfor (let i = 0; i < data.length; i++) {\r\n\t\tlet ppic = filterRegistrationLogoUrl(data[i].company_logo);\r\n\t\tlet ppic2 = filterRegistrationLogoUrl(data[i].logourl);\r\n\r\n\t\tif (ppic != '' && ppic != undefined && ppic != null) {\r\n\t\t\tdata[i].company_logo = ppic;\r\n\t\t} else {\r\n\t\t\tdata[i].company_logo = '';\r\n\t\t}\r\n\t\tif (ppic2 != '' && ppic2 != undefined && ppic2 != null) {\r\n\t\t\tdata[i].logourl = ppic2;\r\n\t\t} else {\r\n\t\t\tdata[i].logourl = '';\r\n\t\t}\r\n\t}\r\n\r\n\t//console.log(data);\r\n\r\n\tdocument.getElementById('swiper').innerHTML = template('tpl-swiper', { data, lng: Languages.package });\r\n\r\n\tlet swiper = new Swiper('#swiper', {\r\n\t\tautoplay: false,\r\n\t\t/*pagination: {\r\n\t\t\tel: '.swiper-pagination',\r\n\t\t\ttype: 'fraction',\r\n\t\t},*/\r\n\t\tnavigation: {\r\n\t\t\tnextEl: '.swiper-button-next',\r\n\t\t\tprevEl: '.swiper-button-prev'\r\n\t\t},\r\n\t\ton: {\r\n\t\t\tslideChange: function() {\r\n\t\t\t\tif (this.realIndex == this.slides.length - 1) {\r\n\t\t\t\t\tlet errorMsg = lng['swiperTitle'];\r\n\t\t\t\t\topg.confirm(\r\n\t\t\t\t\t\terrorMsg,\r\n\t\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t\tlet uncheckedArray = [];\r\n\t\t\t\t\t\t\tfor (let i = 0, l = data.length; i < l; i++) {\r\n\t\t\t\t\t\t\t\tlet barcode = data[i].barcode;\r\n\t\t\t\t\t\t\t\tif (!(barcode in checkedSet)) {\r\n\t\t\t\t\t\t\t\t\tuncheckedArray.push(barcode);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (uncheckedArray.length) {\r\n\t\t\t\t\t\t\t\tlet param = { barcodes: uncheckedArray.join(',') }\r\n\t\t\t\t\t\t\t\tapi[act + '_ignores'](param, () => {\r\n\t\t\t\t\t\t\t\t\tlocation.href = __uri('index.html');\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tlocation.href = __uri('index.html');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: 400,\r\n\t\t\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\t\t\tok: lng['swiperCancel'],\r\n\t\t\t\t\t\t\t\tcancel: lng['swiperOk']\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$('#like,#unlike').click(function() {\r\n\t\tlet index = swiper.realIndex,\r\n\t\t\titem = data[index];\r\n\t\tlet paramKey = target + 'Barcode',\r\n\t\t\tparam = {};\r\n\t\t//console.log(item, paramKey , param , swiper.realIndex);\r\n\t\tparam[paramKey] = item.barcode;\r\n\t\tapi[`${act}_${this.id}`](param, res => {\r\n\t\t\tif (`${this.id}` === 'like') {\r\n\t\t\t\tlet pop = opg.popTop(\r\n\t\t\t\t\t$(\r\n\t\t\t\t\t\t`<div style=\"border-radius: 5px;background-color: #999;line-height: 100px; color:#ffffff;width:300px;height:100px;text-align: center;font-size:22px;\">${\r\n\t\t\t\t\t\t\tlng.addWishListOk\r\n\t\t\t\t\t\t}</div>`\r\n\t\t\t\t\t),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmodalClose: true\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tsetTimeout(() => pop.close(), 1000);\r\n\t\t\t} else if (`${this.id}` === 'unlike') {\r\n\t\t\t\tlet pop = opg.popTop(\r\n\t\t\t\t\t$(\r\n\t\t\t\t\t\t`<div style=\"border-radius: 5px;background-color: #999;line-height: 100px; color:#ffffff;width:300px;height:100px;text-align: center;font-size:22px;\">${\r\n\t\t\t\t\t\t\tlng.addWishListFail\r\n\t\t\t\t\t\t}</div>`\r\n\t\t\t\t\t),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmodalClose: true\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tsetTimeout(() => pop.close(), 1000);\r\n\t\t\t}\r\n\r\n\t\t\t//add barcode into checked array\r\n\t\t\tcheckedSet[item.barcode] = true;\r\n\r\n\t\t\tif (data.length > 1) {\r\n\t\t\t\tdata.splice(index, 1);\r\n\t\t\t\tswiper.removeSlide(index);\r\n\t\t\t} else {\r\n\t\t\t\tcontinueSelect();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n});\r\n\r\nfunction continueSelect() {\r\n\topg.confirm(\r\n\t\tlng.continueSelect,\r\n\t\tfunction(e) {\r\n\t\t\tif (e.index == 0) {\r\n\t\t\t\tlocation.reload(true);\r\n\t\t\t} else {\r\n\t\t\t\tlocation.href = resultPage;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: lng.process,\r\n\t\t\tbuttons: {\r\n\t\t\t\tok: lng.btn.yes,\r\n\t\t\t\tcancel: lng.btn.no\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n}\r\n\r\nlet tplResult = template.compile(document.getElementById('tpl-result').innerHTML);\r\n\r\nfunction showResult() {\r\n\tapi[`${act}_result`](res => {\r\n\t\tif (res.min === 0 && res.max === 0) {\r\n\t\t\tlet errorMsg = lng['tips2'];\r\n\t\t\ttop.opg.confirm(`${errorMsg}`, function() {\r\n\t\t\t\tlocation.href = '../dashboard/idnex.';\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tres.percent = ((res.selected / res.max) * 100).toFixed(0) + '%';\r\n\t\t\tlet data = {\r\n\t\t\t\tlng,\r\n\t\t\t\tresult: res\r\n\t\t\t};\r\n\r\n\t\t\tlet html = tplResult(data);\r\n\r\n\t\t\tlet ophtml = opg(html).popup({\r\n\t\t\t\tmodalClose: false,\r\n\t\t\t\twidth: 300,\r\n\t\t\t\theight: 480\r\n\t\t\t});\r\n\r\n\t\t\t$('#btnContinue').click(function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tophtml.close();\r\n\t\t\t\t//location.reload(true);\r\n\t\t\t});\r\n\t\t\t$('#btnViewScore').click(function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tlocation.href = resultPage;\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction filterRegistrationLogoUrl(logourl) {\r\n\tif (logourl != null && logourl != undefined && $.trim(logourl) != 'N/A' && $.trim(logourl) != '未提供') {\r\n\t\tlet newurl = logourl.split('/');\r\n\t\treturn '/Logo/' + newurl[newurl.length - 1];\r\n\t} else return '';\r\n}\r\n"]}