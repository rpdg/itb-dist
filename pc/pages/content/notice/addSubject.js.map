{"version":3,"sources":["/pages/content/notice/addSubject.ts"],"names":[],"mappings":"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","file":"addSubject.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport PopUp from 'ts/ui/Popup';\r\nimport {Languages} from 'ts/util/Languages';\r\n\r\nconst lpg = Languages.package;\r\nconsole.log('Languages:', Languages);\r\n\r\nopg.api({\r\n\t'addSubject!post': 'Information/AddInformationSubContent',\r\n\t'upload!UPLOAD': 'upload/files',\r\n});\r\n\r\nconst informationId = opg.request['id'];\r\n\r\nlet imgUrl;\r\nlet editor;\r\nlet editorWrap = $(`<script type=\"text/plain\" id=\"myEditor1\"></script>`);\r\n\r\nlet format = {\r\n\t0: lpg.pureText,\r\n\t1: lpg.picture,\r\n\t2: lpg.link,\r\n\t3: lpg.richText,\r\n};\r\nlet formatType;\r\n\r\n\r\nlet panel = $('#panel');\r\n\r\nlet selType = $('#selType').on('change', function () {\r\n\r\n\tif (editor) {\r\n\t\teditor.destroy();\r\n\t\teditor = null;\r\n\t\tlocation.reload(true);\r\n\t}\r\n\r\n\tformatType = ~~selType.val();\r\n\tswitch (formatType) {\r\n\t\tcase 0:\r\n\t\t\tpanel.html(`<textarea style=\"width: 460px; height: 230px;\"></textarea>`);\r\n\t\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tpanel.html(`<form>\r\n\t\t\t\t\t\t<input name=\"text\" type=\"text\" placeholder=\"${lpg.linkText}\" style=\"width: 100%;\"/>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<input name=\"url\" type=\"text\" placeholder=\"${lpg.linkHref}\" style=\"width: 100%;margin-top: 0.5em;\"/>\r\n\t\t\t\t</form>`);\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tpanel.empty();\r\n\t}\r\n});\r\n\r\n\r\nwindow['doSave'] = function (pop: PopUp, ulSubjects: JQuery) {\r\n\tlet content;\r\n\tswitch (formatType) {\r\n\t\tcase 0 :\r\n\t\t\tcontent = panel.find('textarea').eq(0).val();\r\n\t\t\tbreak;\r\n\t\tcase 1 :\r\n\t\t\tcontent = imgUrl;\r\n\t\t\tbreak;\r\n\t\tcase 2 :\r\n\t\t\tlet txt, url;\r\n\t\t\tpanel.find('input').each((i, ele) => {\r\n\t\t\t\tlet val = (ele as HTMLInputElement).value;\r\n\t\t\t\tif (!val) {\r\n\t\t\t\t\treturn opg.warn(lpg.nullInputWarn);\r\n\t\t\t\t}\r\n\t\t\t\tif (i === 0)\r\n\t\t\t\t\ttxt = val;\r\n\t\t\t\telse\r\n\t\t\t\t\turl = val;\r\n\t\t\t});\r\n\t\t\tcontent = `<a href=\"${url}\">${txt}</a>`;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\topg.warn(lpg.plsSelect);\r\n\t\t\treturn;\r\n\t}\r\n\r\n\tif (!content) {\r\n\t\topg.warn(lpg.nullInputWarn);\r\n\t}\r\n\telse {\r\n\t\topg.api.addSubject({formatType, informationId, content}, function (data) {\r\n\t\t\tulSubjects.append(`<li>[${format[formatType]}]: ${content}</li>`);\r\n\t\t\tpop.close();\r\n\t\t});\r\n\t}\r\n\r\n\treturn true;\r\n\r\n};"]}