{"version":3,"sources":["/pages/content/message/view.ts"],"names":[],"mappings":";;;;AAAA,oCAA4B;AAI5B,+CAA4C;AAG5C,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,qBAAS,CAAC,CAAC;AAErC,gBAAG,CAAC,GAAG,CAAC;IACP,MAAM,EAAE,4BAA4B;IACpC,MAAM,EAAC,2BAA2B;CAClC,CAAC,CAAC;AAEH,IAAM,MAAM,GAAG,gBAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AACjC,IAAM,GAAG,GAAG,qBAAS,CAAC,OAAO,CAAC;AAC9B,IAAM,QAAQ,GAAG;IAChB,CAAC,EAAE,GAAG,CAAC,IAAI;IACX,CAAC,EAAE,GAAG,CAAC,IAAI;IACX,CAAC,EAAE,GAAG,CAAC,IAAI;CACX,CAAC;AACF,IAAI,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE;IACzC,EAAE,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,SAAS,CAAC,GAAG,EAAE,EAAC,CAAC,CAAC;AACtC,CAAC,CAAC,CAAC;AAGH,IAAI,EAAE,GAAU,gBAAG,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC;IAChC,GAAG,EAAE,gBAAG,CAAC,GAAG,CAAC,MAAM;IACnB,KAAK,EAAE;QACN,MAAM,EAAE,MAAM;QACd,MAAM,EAAE,CAAC;KACT;IACD,OAAO,EAAE;QACR;YACC,IAAI,EAAE,GAAG,CAAC,QAAQ;YAClB,GAAG,EAAE,UAAU;YACf,KAAK,EAAE,GAAG;SACV;QACD;YACC,IAAI,EAAE,GAAG,CAAC,OAAO;YACjB,GAAG,EAAE,SAAS;YACd,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,cAAI,IAAI,eAAQ,CAAC,IAAI,CAAC,EAAd,CAAc;SAC9B;QACD;YACC,IAAI,EAAE,GAAG,CAAC,UAAU;YACpB,KAAK,EAAE,MAAM;YACb,GAAG,EAAE,YAAY;SACjB;QACD;YACC,IAAI,EAAE,GAAG,CAAC,OAAO;YACjB,GAAG,EAAE,IAAI;YACT,KAAK,EAAE,EAAE;YACT,MAAM,EAAE,UAAC,EAAE;gBACV,MAAM,CAAC,uBAAoB,EAAE,yCAAiC,GAAG,CAAC,GAAG,eAAY,CAAC;YACnF,CAAC;SACD;KACD;CACD,CAAC,CAAC;AAGH,KAAK;AACL,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,aAAa,EAAE;IACnC,IAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAE1C,gBAAG,CAAC,MAAM,CAAI,GAAG,CAAC,GAAG,aAAQ,KAAK,aAAU,EAAE;QAC7C,gBAAG,CAAC,GAAG,CAAC,MAAM,CAAC,EAAC,KAAK,SAAC,EAAE,cAAM,SAAE,CAAC,MAAM,EAAE,EAAX,CAAW,CAAC,CAAC;IAC5C,CAAC,EAAE;QACF,KAAK,EAAE,KAAG,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,OAAS;KACpC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","file":"view.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport Panel from 'ts/ui/Panel.ts';\r\nimport Table from 'ts/ui/Table.ts';\r\nimport {Combo} from 'ts/ui/Combo';\r\nimport {Languages} from 'ts/util/Languages';\r\nimport {store} from '../../../ts/util/store';\r\n\r\nconsole.log('Languages:', Languages);\r\n\r\nopg.api({\r\n\tgetMsg: 'message/GetMessageByUserId',\r\n\tdelMsg:'message/DelMessageByMsgId'\r\n});\r\n\r\nconst userId = opg.request['id'];\r\nconst lpg = Languages.package;\r\nconst msgTypes = {\r\n\t0: lpg.msg0,\r\n\t1: lpg.msg1,\r\n\t2: lpg.msg1,\r\n};\r\nlet selStatus = $('#status').on('change', function () {\r\n\ttb.update({status: selStatus.val()});\r\n});\r\n\r\n\r\nlet tb: Table = opg('#tb').table({\r\n\tapi: opg.api.getMsg,\r\n\tparam: {\r\n\t\tuserId: userId,\r\n\t\tstatus: 0\r\n\t},\r\n\tcolumns: [\r\n\t\t{\r\n\t\t\ttext: lpg.msgTitle,\r\n\t\t\tsrc: 'msgtitle',\r\n\t\t\twidth: 200,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: lpg.msgType,\r\n\t\t\tsrc: 'msgtype',\r\n\t\t\twidth: 100,\r\n\t\t\trender: type => msgTypes[type]\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: lpg.msgContent,\r\n\t\t\talign: 'left',\r\n\t\t\tsrc: 'msgcontent',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: lpg.process,\r\n\t\t\tsrc: 'id',\r\n\t\t\twidth: 80,\r\n\t\t\trender: (id)=>{\r\n\t\t\t\treturn `<button data-id=\"${id}\" class=\"btn-mini btn-danger\">${lpg.del}</button> `;\r\n\t\t\t}\r\n\t\t},\r\n\t]\r\n});\r\n\r\n\r\n//del\r\ntb.tbody.on('click', '.btn-danger', function () {\r\n\tlet btn = $(this), msgId = btn.data('id');\r\n\r\n\topg.danger(`${lpg.del} [<b>${msgId}</b>] ? `, function () {\r\n\t\topg.api.delMsg({msgId}, () => tb.update());\r\n\t}, {\r\n\t\ttitle: `${lpg.please}${lpg.confirm}`,\r\n\t});\r\n});"]}