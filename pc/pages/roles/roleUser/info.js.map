{"version":3,"sources":["/pages/roles/roleUser/info.ts"],"names":[],"mappings":";;;;AAAA,oCAA4B;AAE5B,+CAA4C;AAO5C,gBAAG,CAAC,GAAG,CAAC;IACP,UAAU,EAAE,iBAAiB;IAC7B,sBAAsB,EAAE,0CAA0C;IAClE,cAAc,EAAE,qBAAqB;CACrC,CAAC,CAAC;AAEH,IAAM,GAAG,GAAG,qBAAS,CAAC,OAAO,CAAC;AAC9B,IAAM,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC;AAElC,IAAM,IAAI,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC;AAC5B,IAAI,KAAK,GAAU,gBAAG,CAAC,SAAS,CAAC,WAAW,EAAE;IAC7C,KAAK,EAAE,KAAG,UAAY;IACtB,aAAa,EAAE,gCAA4B,GAAG,CAAC,MAAQ;IACvD,cAAc,EAAE;QACf,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAChC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAClB,CAAC;CACD,CAAC,CAAC;AAEH,gBAAG,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC;IACtB,GAAG,EAAE,gBAAG,CAAC,GAAG,CAAC,UAAU;CACvB,CAAC,CAAC;AAEH,IAAI,EAAE,GAAU,gBAAG,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;IACtC,GAAG,EAAE,gBAAG,CAAC,GAAG,CAAC,eAAe;IAC5B,aAAa;IACb,QAAQ,EAAE;QACT,KAAK,EAAE,KAAG,UAAU,GAAG,GAAG,CAAC,IAAM;KACjC;IACD,OAAO,EAAE;QACR;YACC,IAAI,EAAE,GAAG;YACT,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,UAAU;SAC1B;QACD;YACC,IAAI,EAAE,KAAG,GAAG,CAAC,QAAU;YACvB,GAAG,EAAE,UAAU;SACf;QACD;YACC,IAAI,EAAE,KAAG,GAAG,CAAC,QAAU;YACvB,GAAG,EAAE,WAAW;YAChB,MAAM,EAAE,UAAC,EAAE,EAAE,CAAC,EAAG,GAAG,IAAI,OAAG,EAAE,UAAI,GAAG,CAAC,QAAQ,IAAE,EAAE,CAAE,EAA3B,CAA2B;SACnD;QACD;YACC,IAAI,EAAE,KAAG,GAAG,CAAC,QAAU;YACvB,GAAG,EAAE,MAAM;SACX;KACD;IACD,UAAU,EAAE,IAAI;CAChB,CAAC,CAAC;AAEH,MAAM,CAAC,QAAQ,CAAC,GAAG,UAAU,MAAa,EAAE,KAAY;IACvD,IAAI,MAAM,GAAG,EAAE,CAAC,eAAe,EAAE,CAAC;IAClC,IAAI,CAAC,MAAM,EAAE;QACZ,gBAAG,CAAC,IAAI,CAAC,KAAG,qBAAS,CAAC,OAAO,CAAC,cAAgB,CAAC,CAAC;QAChD,OAAO,IAAI,CAAC;KACZ;IAED,OAAO,gBAAG,CAAC,GAAG,CAAC,cAAc,CAAC,EAAC,MAAM,UAAG,MAAM,EAAE,gBAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAC,EAAE;QACvE,MAAM,CAAC,KAAK,EAAE,CAAC;QACf,KAAK,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC","file":"info.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport Table from 'ts/ui/Table.ts';\r\nimport {Languages} from 'ts/util/Languages';\r\nimport PopUp from 'ts/ui/Popup';\r\nimport {Cache} from 'ts/util/store';\r\nimport Panel from 'ts/ui/Panel';\r\nimport {ListBox} from '../../../ts/ui/FormControls';\r\n\r\n\r\nopg.api({\r\n\tgetAllRole: 'role/GetAllRole',\r\n\t'getRoleUserList!post': 'user/SearchUsersByRoleAndUserNameKeyword',\r\n\tinsertUserRole: 'user/InsertUserRole',\r\n});\r\n\r\nconst lpg = Languages.package;\r\nconst moduleName = lpg.moduleName;\r\n\r\nconst form = $('#tbSearch');\r\nlet panel: Panel = opg.wrapPanel('#tbSearch', {\r\n\ttitle: `${moduleName}`,\r\n\tbtnSearchText: `<i class=\"ico-find\"></i> ${lpg.search}`,\r\n\tbtnSearchClick: function () {\r\n\t\tlet param = form.fieldsToJson();\r\n\t\ttb.update(param);\r\n\t},\r\n});\r\n\r\nopg('#roleId').listBox({\r\n\tapi: opg.api.getAllRole,\r\n});\r\n\r\nlet tb: Table = opg('#tbResult').table({\r\n\tapi: opg.api.getRoleUserList,\r\n\t//lazy: true,\r\n\ttitleBar: {\r\n\t\ttitle: `${moduleName}${lpg.list}`,\r\n\t},\r\n\tcolumns: [\r\n\t\t{\r\n\t\t\ttext: ' ',\r\n\t\t\tsrc: 'id', cmd: 'checkOne',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `${lpg.userName}`,\r\n\t\t\tsrc: 'username',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `${lpg.realName}`,\r\n\t\t\tsrc: 'firstname',\r\n\t\t\trender: (fn ,i , row)=> `${fn} ${row.lastname||''}`\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `${lpg.roleName}`,\r\n\t\t\tsrc: 'name',\r\n\t\t},\r\n\t],\r\n\tpagination: true,\r\n});\r\n\r\nwindow['doSave'] = function (popWin: PopUp, table: Table) {\r\n\tlet userId = tb.getCheckedValue();\r\n\tif (!userId) {\r\n\t\topg.warn(`${Languages.package.nullSelectWarn}`);\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn opg.api.insertUserRole({userId , roleId: opg.request['roleId']}, function () {\r\n\t\tpopWin.close();\r\n\t\ttable.update();\r\n\t});\r\n};\r\n"]}