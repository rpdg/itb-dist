{"version":3,"sources":["/pages/roles/role/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import opg from 'ts/opg.ts';\r\nimport Table from 'ts/ui/Table.ts';\r\nimport {Languages} from 'ts/util/Languages';\r\nimport PopUp from 'ts/ui/Popup';\r\nimport {Cache} from 'ts/util/store';\r\n\r\n\r\nopg.api({\r\n\tgetAll: 'role/GetAllRole',\r\n\tdelete: 'role/DelRole',\r\n\tgetCount: 'canrousel/GetCurCanrouselCount',\r\n\tsetCount: 'canrousel/SetCurCanrouselCount',\r\n\t'position!post': 'canrousel/ChangeCanrouselPosition',\r\n});\r\n\r\nconst lpg = Languages.package;\r\nconst moduleName = lpg.role;\r\n\r\nlet tb: Table = opg('#tb').table({\r\n\tapi: opg.api.getAll,\r\n\ttitleBar: {\r\n\t\ttitle: `${moduleName}${lpg.list}`,\r\n\t\tbuttons: [{id: 'btnAdd', className: 'btn-create', html: `<i class=\"ico ico-create\"></i> ${lpg.add}`}],\r\n\t},\r\n\tcolumns: [\r\n\t\t{\r\n\t\t\ttext: `ID`, width: 120,\r\n\t\t\tsrc: 'id',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `${lpg.roleName}`,\r\n\t\t\tsrc: 'name',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `${lpg.roleDesc}`,\r\n\t\t\tsrc: 'desc',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `${lpg.process}`,\r\n\t\t\tsrc: 'id',\r\n\t\t\twidth: 200,\r\n\t\t\trender: function (id, i, row) {\r\n\t\t\t\t//console.log(arr);\r\n\t\t\t\treturn `\r\n\t\t\t\t\t\t<button class=\"btn-mini btn-info\" data-id=\"${id}\" data-index=\"${row[':index']}\" data-title=\"${row.name}\">${lpg.edit}</button> \r\n\t\t\t\t\t\t<button class=\"btn-mini btn-danger\" data-id=\"${id}\" data-title=\"${row.name}\">${lpg.del}</button>\r\n\t\t\t\t`;\r\n\t\t\t},\r\n\t\t},\r\n\t],\r\n\tpagination: false,\r\n});\r\n\r\nlet cache :Cache = Cache.getInstance();\r\n\r\nconst infoPage = __uri('/pages/roles/role/info.html').split('?')[0];\r\n\r\n//Edit\r\ntb.tbody.on('click', '.btn-info', function () {\r\n\tlet btn = $(this), title = btn.data('title'), id = btn.data('id') , index = btn.data('index');\r\n\tlet role = tb.data[index];\r\n\tcache.set('cur_data' , role);\r\n\tlet pop: PopUp = top.opg.confirm(`<iframe src=\"${infoPage}?id=${id}\" />`, function (i, ifr) {\r\n\t\treturn ifr.doSave(pop, tb);\r\n\t}, {\r\n\t\ttitle: `${lpg.edit}${moduleName}: ${title}`,\r\n\t\tbtnMax: true,\r\n\t\twidth: 700,\r\n\t\theight: 400,\r\n\t\tbuttons: {\r\n\t\t\tok: `${lpg.save}${moduleName}`,\r\n\t\t\tcancel: lpg.cancel,\r\n\t\t},\r\n\t});\r\n});\r\n\r\n//Add\r\n$('#btnAdd').click(function () {\r\n\r\n\tlet pop = top.opg.confirm(`<iframe src=\"${infoPage}\" />`, function (i, ifr) {\r\n\t\treturn ifr.doSave(pop, tb);\r\n\t}, {\r\n\t\ttitle: `${lpg.add}${moduleName}`,\r\n\t\tbtnMax: true,\r\n\t\twidth: 700,\r\n\t\theight: 400,\r\n\t\tbuttons: {\r\n\t\t\tok: `${lpg.save}${moduleName}`,\r\n\t\t\tcancel: lpg.cancel,\r\n\t\t},\r\n\t});\r\n});\r\n\r\n\r\n//del\r\ntb.tbody.on('click', '.btn-danger', function () {\r\n\tlet btn = $(this), title = btn.data('title'), roleId = btn.data('id');\r\n\r\n\topg.danger(`${lpg.del}${lpg.role} [<b>${title}</b>] ? `, function () {\r\n\t\topg.api.delete({roleId}, () => tb.update());\r\n\t}, {\r\n\t\ttitle: `${lpg.please}${lpg.confirm}`,\r\n\t});\r\n});\r\n"]}