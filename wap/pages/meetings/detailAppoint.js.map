{"version":3,"sources":["/pages/meetings/detailAppoint.ts"],"names":[],"mappings":"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","file":"detailAppoint.js","sourcesContent":["import {api} from '/js/api';\r\nimport {request} from '/js/util';\r\nimport {Languages, Store} from '../../js/util';\r\n\r\napi({\r\n\tdeleteSchedule: 'schedule/DelScheduleById',\r\n\t'getExhibitionDetailByBarCode': 'exhibition/GetExhibitionDetailByBarCode',\r\n\t'getBuyerDetailByBarCode': 'buyer/GetBuyerDetailByBarCode',\r\n\t'getScheduleById': 'schedule/GetScheduleById',\r\n    'getExhibitionDetailByBarCode':'exhibition/GetExhibitionDetailByBarCode',\r\n    'getBuyerDetailByBarCode':'buyer/GetBuyerDetailByBarCode'\r\n});\r\n\r\nconst lpg = Languages.package;\r\nconst id = request['aid'];\r\nconst obj = Store.get(`Apt_${id}`);\r\n\r\nlet clng = 'en';\r\n\r\nif (localStorage.getItem(\"lngPkg\") != null || localStorage.getItem(\"lngPkg\") != undefined) {\r\n    const currentlng = localStorage.getItem(\"lngPkg\");\r\n    clng = currentlng.replace(/[\"\"\"]/g, \"\");\r\n}\r\n\r\n\r\nlet scheduleId = obj.scheduleid;\r\nlet curStage = Store.get('Stage');\r\nlet act = Store.get('RoleName') === 'exhibition' ? 'exhibition' : 'buyer';\r\n\r\ntemplate.defaults.imports.act = act;\r\nobj.lng = Languages.package;\r\nobj.title = obj.name;\r\nobj.role = act;\r\n\r\n\r\nif (act == 'buyer') {\r\n\tapi.getExhibitionDetailByBarCode({'barcode': id}, data => {\r\n\t\tif (data.length > 0) {\r\n\t\t\tapi.getScheduleById({scheduleid: obj.scheduleid}, data2 => {\r\n\t\t\t\tif (data2.length > 0) {\r\n\t\t\t\t\tobj.logourl = data[0].logourl;\r\n\t\t\t\t\tobj.company = data[0].company;\r\n\t\t\t\t\tobj.name = data[0].name;\r\n\t\t\t\t\tobj.address = data2[0].focusonmeetinginfo_id == '0' ? data2[0].booth_no : data2[0].address + '  Seat Number(座位号): ' + data2[0].seatnumber;\r\n\t\t\t\t\tobj.isShowDeleteBtn = (curStage == 'open diary');\r\n\t\t\t\t\tobj.isShowSignBtn=(curStage == 'exhibition');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tobj.logourl = data[0].logourl;\r\n\t\t\t\t\tobj.company = data[0].company;\r\n\t\t\t\t\tobj.name = data[0].name;\r\n\t\t\t\t\tobj.address = data[0].booth_no;\r\n\t\t\t\t\tobj.isShowDeleteBtn = (curStage == 'open diary');\r\n                    obj.isShowSignBtn=(curStage == 'exhibition');\r\n\t\t\t\t}\r\n\t\t\t\tdocument.getElementById('main').innerHTML = template('tpl', obj);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmui.alert(lpg['tips2'], lpg['tipTitle'], lpg['okb']);\r\n\t\t}\r\n\t});\r\n}\r\nelse if (act == 'exhibition') {\r\n\tapi.getBuyerDetailByBarCode({'barcode': id}, data => {\r\n\t\tif (data.length > 0) {\r\n\t\t\tapi.getScheduleById({scheduleid: obj.scheduleid}, data2 => {\r\n\t\t\t\tif (data2.length > 0) {\r\n\t\t\t\t\tobj.logourl = data[0].company_logo;\r\n\t\t\t\t\tobj.company = data[0].company;\r\n\t\t\t\t\tobj.name = data[0].name;\r\n\t\t\t\t\tobj.address = data2[0].focusonmeetinginfo_id == '0' ? data2[0].booth_no : data2[0].address+ '  Seat Number(座位号): ' + data2[0].seatnumber;\r\n\t\t\t\t\tobj.isShowDeleteBtn = (curStage == 'open diary');\r\n                    obj.isShowSignBtn=(curStage == 'exhibition');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tobj.logourl = data[0].company_logo;\r\n\t\t\t\t\tobj.company = data[0].company;\r\n\t\t\t\t\tobj.name = data[0].name;\r\n\t\t\t\t\tobj.address = lpg['tempaddress'];\r\n\t\t\t\t\tobj.isShowDeleteBtn = (curStage == 'open diary');\r\n                    obj.isShowSignBtn=(curStage == 'exhibition');\r\n\t\t\t\t}\r\n\t\t\t\tdocument.getElementById('main').innerHTML = template('tpl', obj);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmui.alert(lpg['tips2'], lpg['tipTitle'], lpg['okb']);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\napi.deleteSchedule.set('onError', function (code, error, callback) {\r\n\tif (code === 200 && error === 'DelScheduleById_ERROR01') {\r\n\t\tlet errorMsg = lpg['tips'];\r\n\t\tmui.alert(`${errorMsg}`, lpg['tipTitle'], lpg['okb']);\r\n\t}\r\n});\r\n\r\n\r\n$('#main').on('click' , '.btnDelete' , function () {\r\n\tapi.deleteSchedule({scheduleId: scheduleId}, data => {\r\n\t\tlocation.href = '../schedule/mine.html';\r\n\t});\r\n});\r\n\r\n$('#main').on('click' , '.btnSign' , function () {\r\n    location.href = `../meetings/signin.html?from=schedule&typeCode=2&score=1000&isa=1&id=${obj.scheduleid}&end=${obj.begindate.substr(11, 5)}-${obj.enddate.substr(11, 5)}`;\r\n});\r\n\r\n\r\n$('#main').on('click' , '.btnShowmask' , function () {\r\n    getInfoBybarcode(id);\r\n});\r\n\r\n$('#main').on('click' , '.S3' , function () {\r\n    getInfoBybarcode(id);\r\n});\r\n\r\n\r\nlet maskFlag = 1;\r\n\r\nfunction getInfoBybarcode(barcode) {\r\n    var p={};\r\n    p.barcode=barcode;\r\n    if(act==\"buyer\") {\r\n        api.getExhibitionDetailByBarCode(p,data=>{\r\n            let renderDetail = template.compile(document.getElementById('tpl-detail').innerHTML);\r\n\r\n            let it = data[0];\r\n            it.clng = clng;\r\n            it.lng = lpg;\r\n            console.log(it);\r\n            maskFlag = 1;\r\n            showMask(renderDetail(it));\r\n\r\n        });\r\n    }\r\n    else if(act==\"exhibition\")\r\n    {\r\n        api.getBuyerDetailByBarCode(p,data=>{\r\n            let renderDetail = template.compile(document.getElementById('tpl-detail').innerHTML);\r\n\r\n            let it = data[0];\r\n            it.clng = clng;\r\n            it.lng = lpg;\r\n            console.log(it);\r\n            maskFlag = 1;\r\n            showMask(renderDetail(it));\r\n        });\r\n    }\r\n};\r\n\r\nfunction showMask(htmlContent: string) {\r\n    let mask = $(`<div id=\"mymask\" class=\"mask\" style=\"background-color: rgba(0,0,0,0.6)\"></div>`);\r\n    mask.on('click', function () {\r\n        if (maskFlag === 1) {\r\n            mask.remove();\r\n        }\r\n    });\r\n\r\n    mask.append(htmlContent);\r\n    $('body').append(mask);\r\n    return mask;\r\n}\r\n\r\n\r\ntemplate.defaults.imports.locationsearch = location.search;"]}