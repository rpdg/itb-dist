{"version":3,"sources":["/pages/wishlist/wishlist.ts"],"names":[],"mappings":"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","file":"wishlist.js","sourcesContent":["/// <reference path=\"../../@types/jquery.d.ts\" />\r\n/// <reference path=\"../../@types/mui.d.ts\" />\r\n/// <reference path=\"../../@types/custom.d.ts\" />\r\n\r\nimport { api } from '../../js/api';\r\nimport { Languages, Store } from '../../js/util';\r\n\r\napi({\r\n\texhibition_getList: 'exhibition/GetExhibitionWishlist',\r\n\texhibition_like: 'exhibition/LikeBuyerForExhibtionByBarCode',\r\n\texhibition_unlike: 'exhibition/UnLikeBuyerForExhibtionByBarCode',\r\n\texhibition_result: 'exhibition/ExhibitionWishListResult',\r\n\t'exhibition_ignores!post': 'exhibition/UpExhibitionWishlistStatus',\r\n\r\n\tbuyer_getList: 'buyer/GetBuyerWishlist',\r\n\tbuyer_like: 'buyer/LikeExhibtionForBuyerByBarCode',\r\n\tbuyer_unlike: 'buyer/UnLikeExhibtionForBuyerByBarCode',\r\n\tbuyer_result: 'buyer/BuyerWishListResult',\r\n\t'buyer_ignores!post': 'buyer/UpBuyerWishlistStatus'\r\n});\r\n\r\nconst lng = Languages.package;\r\nconst resultPage = __uri('./result.html');\r\n\r\napi.exhibition_getList.set('onError', function(code, error, callback) {\r\n\tif (code === 200 && error === 'GetExhibitionWishlist_Error01') {\r\n\t\t//location.href = __uri('../wishlist/result.html?isemployee=1');\r\n\t\tlet errorMsg = lng['tips'];\r\n\t\tmui.alert(`${errorMsg}`, lng['tipTitle'], lng['okb']);\r\n\t}\r\n});\r\n\r\napi.exhibition_like.set('onError', function(code, error, callback) {\r\n\tif (code === 200 && error === 'LikeBuyerForExhibtionByBarCode_Error01') {\r\n\t\tlet errorMsg = lng['tips3'];\r\n\t\tmui.alert(`${errorMsg}`, lng['tipTitle'], lng['okb']);\r\n\t}\r\n});\r\n\r\napi.buyer_like.set('onError', function(code, error, callback) {\r\n\tif (code === 200 && error === 'LikeExhibtionForBuyerByBarCode_Error01') {\r\n\t\tlet errorMsg = lng['tips3'];\r\n\t\tmui.alert(`${errorMsg}`, lng['tipTitle'], lng['okb']);\r\n\t}\r\n});\r\n\r\nlet clng = 'en';\r\n\r\nif (localStorage.getItem('lngPkg') != null || localStorage.getItem('lngPkg') != undefined) {\r\n\tconst currentlng = localStorage.getItem('lngPkg');\r\n\tclng = currentlng.replace(/[\"\"\"]/g, '');\r\n}\r\n\r\nlet act = Store.get('RoleName') === 'exhibition' ? 'exhibition' : 'buyer';\r\nlet target = act === 'exhibition' ? 'buyer' : 'exhibition';\r\n\r\ntemplate.defaults.imports.act = act;\r\n\r\n\r\nlet checkedSet = {};\r\n\r\nlet getWishList = function(isShowResult: boolean) {\r\n\tapi[act + '_getList'](data => {\r\n\t\tif (isShowResult) {\r\n\t\t\tshowResult();\r\n\t\t}\r\n\r\n\t\tif (data.length === 0) {\r\n\t\t\tif (act == 'exhibition') {\r\n\t\t\t\tlet errorMsg = lng['tips4'];\r\n\t\t\t\tmui.alert(`${errorMsg}`, lng['tipTitle'], lng['okb']);\r\n\t\t\t} else {\r\n\t\t\t\tlet errorMsg = lng['tips5'];\r\n\t\t\t\tmui.alert(`${errorMsg}`, lng['tipTitle'], lng['okb']);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdata.showDetail = lng.showDetail;\r\n\t\tdata.lng = Languages.package;\r\n\t\tdata.clng = clng;\r\n\t\tdocument.getElementById('swiper-wrapper').innerHTML = template('tpl-slider', data);\r\n\r\n\t\tlet swiper = new Swiper('#slider', {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: false,\r\n\t\t\tloopFillGroupWithBlank: true,\r\n\t\t\tobserver: true,\r\n\t\t\tobserveParents: true,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\ton: {\r\n\t\t\t\tslideChange: function() {\r\n\t\t\t\t\tif (this.realIndex == this.slides.length - 1) {\r\n\t\t\t\t\t\tlet btnArray = [lng['swiperOk'], lng['swiperCancel']];\r\n\t\t\t\t\t\tmui.confirm(lng['swiperTitle'], lng['tipTitle'], btnArray, function(e) {\r\n\t\t\t\t\t\t\tif (e.index == 1) {\r\n\t\t\t\t\t\t\t\tlet uncheckedArray = [];\r\n\t\t\t\t\t\t\t\tfor (let i = 0, l = data.length; i < l; i++) {\r\n\t\t\t\t\t\t\t\t\tlet barcode = data[i].barcode;\r\n\t\t\t\t\t\t\t\t\tif (!(barcode in checkedSet)) {\r\n\t\t\t\t\t\t\t\t\t\tuncheckedArray.push(barcode);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(uncheckedArray.length){\r\n\t\t\t\t\t\t\t\t\tlet param = {barcodes : uncheckedArray.join(',')}\r\n\t\t\t\t\t\t\t\t\tapi[act + '_ignores'](param , ()=>{\r\n\t\t\t\t\t\t\t\t\t\tlocation.href = __uri('wishlist.html');\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tlocation.href = __uri('wishlist.html');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet renderDetail = template.compile(document.getElementById('tpl-detail').innerHTML);\r\n\t\t$('#slider')\r\n\t\t\t.off('click')\r\n\t\t\t.on('click', '.swiper-slide', function() {\r\n\t\t\t\tlet idx = this.getAttribute('data-index');\r\n\t\t\t\tlet it = data[idx];\r\n\t\t\t\tit.clng = clng;\r\n\t\t\t\tit.lng = lng;\r\n\r\n\t\t\t\tmaskFlag = 1;\r\n\t\t\t\tshowMask(renderDetail(it));\r\n\t\t\t});\r\n\r\n\t\t$('#like,#unlike').click(function() {\r\n\t\t\tlet ele = $('.swiper-slide-active');\r\n\t\t\tlet index = $('.swiper-slide').index(ele);\r\n\t\t\t//let index = swiper.realIndex;\r\n\t\t\tlet item = data[index];\r\n\t\t\tlet paramKey = target + 'Barcode',\r\n\t\t\t\tparam = {};\r\n\r\n\t\t\t//console.log(item, paramKey , param , swiper.realIndex);\r\n\t\t\tparam[paramKey] = item.barcode;\r\n\t\t\tapi[`${act}_${this.id}`](param, res => {\r\n\t\t\t\tif (`${this.id}` === 'like') mui.toast(lng.addWishListOk, { verticalAlign: 'center' });\r\n\t\t\t\telse if (`${this.id}` === 'unlike') mui.toast(lng.addWishListFail, { verticalAlign: 'center' });\r\n\r\n\t\t\t\t//add barcode into checked array\r\n\t\t\t\tcheckedSet[item.barcode] = true;\r\n\r\n\t\t\t\tif (data.length > 1) {\r\n\t\t\t\t\t//debugger;\r\n\t\t\t\t\tdata.splice(index, 1);\r\n\t\t\t\t\tswiper.removeSlide(index);\r\n\t\t\t\t\tswiper.update();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshowResult();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\trunTour();\r\n\t});\r\n};\r\n\r\ngetWishList(Store.get('tour_end') && Store.get('tour_end') == 'yes');\r\n\r\nlet tplResult = template.compile(document.getElementById('tpl-result').innerHTML);\r\n\r\nlet maskFlag = 1;\r\n\r\nfunction showResult() {\r\n\tapi[`${act}_result`](res => {\r\n\t\tif (res.min === 0 && res.max === 0) {\r\n\t\t\tlet errorMsg = lng['tips2'];\r\n\t\t\tlet btnArray = [lng['okb'], lng['cancelb']];\r\n\t\t\tmui.confirm(`${errorMsg}`, lng['tipTitle'], btnArray, function(e) {\r\n\t\t\t\tif (e.index == 0) {\r\n\t\t\t\t\tlocation.href = '../dashboard/index.html';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlocation.href = '../dashboard/index.html';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tres.percent = ((res.selected / res.max) * 100).toFixed(0) + '%';\r\n\t\t\tlet data = {\r\n\t\t\t\tlng,\r\n\t\t\t\tresult: res\r\n\t\t\t};\r\n\r\n\t\t\tmaskFlag = 0;\r\n\t\t\tlet mask = showMask(tplResult(data));\r\n\r\n\t\t\t$('#btnSetting').click(function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tlocation.href = 'busydate.html';\r\n\t\t\t});\r\n\r\n\t\t\t$('#btnContinue').click(function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tmask.remove();\r\n\t\t\t\tgetWishList(false);\r\n\t\t\t\t//location.reload(true);\r\n\t\t\t});\r\n\r\n\t\t\t$('#btnViewScore').click(function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tlocation.href = resultPage + '&comepage=wishlist';\r\n\t\t\t});\r\n\r\n\t\t\tif (act === 'exhibition') $('#btnSetting').hide();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction showMask(htmlContent: string) {\r\n\tlet mask = $(`<div id=\"mymask\" class=\"mask\" style=\"background-color: rgba(0,0,0,0.6)\"></div>`);\r\n\tmask.on('click', function() {\r\n\t\tif (maskFlag === 1) {\r\n\t\t\tmask.remove();\r\n\t\t}\r\n\t});\r\n\r\n\tmask.append(htmlContent);\r\n\t$('body').append(mask);\r\n\treturn mask;\r\n}\r\n\r\n/*function continueSelect() {\r\n\tlet btnArray = [lng.btn.yes, lng.btn.no];\r\n\tmui.confirm(lng.continueSelect, lng.process, btnArray, function (e) {\r\n\t\tif (e.index == 0) {\r\n\t\t\tlocation.reload(true);\r\n\t\t} else {\r\n\t\t\tlocation.href = resultPage;\r\n\t\t}\r\n\t});\r\n}*/\r\n\r\n$('#btn_submit').click(function() {\r\n\tlocation.href = '../dashboard/index.html?s=wishlist';\r\n});\r\n\r\nfunction runTour() {\r\n\tlet tour = new Tour({\r\n\t\tbackdrop: true,\r\n\t\tsmartPlacement: true,\r\n\t\t//storage: false,\r\n\t\ttemplate: `<div class='popover tour'>\r\n\t\t\t\t  <div class='arrow'></div>\r\n\t\t\t\t  <h3 class='popover-title'></h3>\r\n\t\t\t\t  <div class='popover-content'></div>\r\n\t\t\t\t  <div class='popover-navigation'>\r\n\t\t\t\t    <button class='btn btn-default' data-role='prev'>« ${lng.tourLabel.prev}</button>\r\n\t\t\t\t    <button class='btn btn-default' data-role='next'>${lng.tourLabel.next} »</button>\r\n\t\t\t\t    <button class='btn btn-default' data-role='end'>${lng.tourLabel.end}</button>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</div>`,\r\n\t\tsteps: [\r\n\t\t\t{\r\n\t\t\t\telement: '.swiper-slide-active',\r\n\t\t\t\treflex: true,\r\n\t\t\t\tplacement: 'top',\r\n\t\t\t\ttitle: lng.tour[7].title,\r\n\t\t\t\tcontent: lng.tour[7].content\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\telement: '.swiper-slide-active',\r\n\t\t\t\treflex: true,\r\n\t\t\t\tplacement: 'top',\r\n\t\t\t\ttitle: act == 'exhibition' ? lng.tour[0].title : lng.tour[5].title,\r\n\t\t\t\tcontent: act == 'exhibition' ? lng.tour[0].content : lng.tour[5].content\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\telement: '#btn_submit',\r\n\t\t\t\treflex: true,\r\n\t\t\t\tplacement: 'left',\r\n\t\t\t\ttitle: lng.tour[6].title,\r\n\t\t\t\tcontent: lng.tour[6].content\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\telement: '#like',\r\n\t\t\t\treflex: true,\r\n\t\t\t\tplacement: 'top',\r\n\t\t\t\ttitle: act == 'exhibition' ? lng.tour[1].title : lng.tour[3].title,\r\n\t\t\t\tcontent: act == 'exhibition' ? lng.tour[1].content : lng.tour[3].content\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\telement: '#unlike',\r\n\t\t\t\treflex: true,\r\n\t\t\t\tplacement: 'top',\r\n\t\t\t\ttitle: act == 'exhibition' ? lng.tour[2].title : lng.tour[4].title,\r\n\t\t\t\tcontent: act == 'exhibition' ? lng.tour[2].content : lng.tour[4].content\r\n\t\t\t}\r\n\t\t]\r\n\t\t/*onNext :function () {\r\n\t\t\ttour.redraw();\r\n\t\t}*/\r\n\t});\r\n\r\n\t// Initialize the tour\r\n\ttour.init();\r\n\r\n\t// Start the tour\r\n\ttour.start();\r\n}\r\n\r\n//$('.mui-content').addClass('mui-content-app-correction');\r\n"]}