{"version":3,"sources":["/pages/buyer/list.ts"],"names":[],"mappings":"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","file":"list.js","sourcesContent":["import {api} from '/js/api'\r\nimport {Languages, request} from \"/js/util\";\r\nimport {array} from '../../js/util';\r\n\r\napi({\r\n    product: 'product/GetProductGroup',\r\n    //region: 'country/GetAllCountry',\r\n    region: 'country/GetAllContinent',\r\n    segment: 'product/GetProductTypes',\r\n});\r\n\r\nlet by = request['by'];\r\nlet mytext=request['text'];\r\nif(mytext!=undefined && mytext!=\"\") {\r\n    $(\"#mytext\").html('- ' + mytext);\r\n}\r\ntemplate.defaults.imports.mytextobj=mytext;\r\n\r\nconst lng = Languages.package;\r\nlet clng = 'en';\r\n\r\nif (localStorage.getItem('lngPkg') != null || localStorage.getItem('lngPkg') != undefined) {\r\n    const currentlng = localStorage.getItem('lngPkg');\r\n    clng = currentlng.replace(/[\"\"\"]/g, '');\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nif (by === 'product') {\r\n\r\n    api.product(data => {\r\n        data.lng = Languages.current;\r\n        data.request = request;\r\n        document.getElementById('ulBuyerList').innerHTML = template('tpl', data);\r\n    })\r\n\r\n}\r\nelse if (by === 'region' || by === 'interestedregion') {\r\n    api.region(data => {\r\n        makeRegion(data);\r\n    });\r\n}\r\nelse if (by === 'segment') {\r\n    api.segment(data => {\r\n        data.lng = Languages.current;\r\n        data.request = request;\r\n        document.getElementById('ulBuyerList').innerHTML = template('tpl', data);\r\n    })\r\n}\r\n\r\nfunction makeRegion(arr: Array) {\r\n    let alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n    let list: any = {};\r\n\r\n    let data;\r\n    if (Languages.current === 'en') {\r\n        let fieldName = 'chau_en';\r\n        data = array.sort(arr, fieldName, function (a, b) {\r\n            let A = a[fieldName].toUpperCase(), B = b[fieldName].toUpperCase();\r\n            return A === B ? 0 : A > B ? 1 : -1;\r\n        },);\r\n        for (let i = 0, l = data.length; i < l; i++) {\r\n            let it = data[i], f = it[fieldName].substr(0, 1).toUpperCase();\r\n            if (!list[f]) {\r\n                if (alpha.indexOf(f) === -1)\r\n                    f = '#';\r\n                list[f] = [];\r\n            }\r\n\r\n            it.label = it[fieldName];\r\n            it.id = it.label;\r\n            list[f].push(it);\r\n        }\r\n    }\r\n    else {\r\n        let fieldName = 'chau_cn';\r\n        data = array.sort(arr, fieldName, function (a, b) {\r\n            let A = makePy(a[fieldName])[0].toUpperCase(), B = makePy(b[fieldName])[0].toUpperCase();\r\n            return A === B ? 0 : A > B ? 1 : -1;\r\n        },);\r\n        for (let i = 0, l = data.length; i < l; i++) {\r\n            let it = data[i], f = makePy(it[fieldName])[0].substr(0, 1).toUpperCase();\r\n\r\n            if (!list[f]) {\r\n                if (alpha.indexOf(f) === -1)\r\n                    f = '#';\r\n                list[f] = [];\r\n            }\r\n            it.label = it[fieldName];\r\n            it.id = it.label;\r\n            list[f].push(it);\r\n        }\r\n    }\r\n\r\n\r\n    console.log(list);\r\n    list.request = request;\r\n    document.getElementById('divBuyerList').innerHTML = template('tpl-regions', list);\r\n}\r\n\r\n\r\nfunction isGroup(pd) {\r\n    if(pd.indexOf(\".0\")>-1){\r\n        return 'true';\r\n    }\r\n    else\r\n        return 'false';\r\n}\r\ntemplate.defaults.imports.isGroup=isGroup;\r\n\r\n\r\ndocument.getElementById('iptSearch').addEventListener('keypress', function (evt) {\r\n    if (evt.keyCode === 13 && this.value) {\r\n        //location.href = './buyer3.html?by=search' + (request['from'] ? '&from=' + request['from'] : '') + '&keyword=' + this.value;\r\n        location.href = './buyer1.html?by=search' + (request['from']?'&from='+request['from']: '') +  (request['info']?'&info='+request['info']: '') +  '&keyword=' + this.value;\r\n    }\r\n}, false);\r\n\r\n$(\"#iptSearch\").attr('placeholder',lng.searchtips);\r\n\r\n\r\n$('#backurl').attr('href','old_buyer1.html');"]}